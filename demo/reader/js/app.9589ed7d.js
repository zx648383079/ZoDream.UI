(function(t){function e(e){for(var a,r,o=e[0],c=e[1],h=e[2],l=0,f=[];l<o.length;l++)r=o[l],n[r]&&f.push(n[r][0]),n[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(f.length)f.shift()();return s.push.apply(s,h||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],a=!0,o=1;o<i.length;o++){var c=i[o];0!==n[c]&&(a=!1)}a&&(s.splice(e--,1),t=r(r.s=i[0]))}return t}var a={},n={app:0},s=[];function r(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=a,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(i,a,function(e){return t[e]}.bind(null,a));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var h=0;h<o.length;h++)e(o[h]);var u=c;s.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("cd49")},"01a2":function(t,e,i){},"0c72":function(t,e,i){},"115c":function(t,e,i){},"16af":function(t,e,i){},"1a48":function(t,e,i){"use strict";var a=i("8d04"),n=i.n(a);n.a},"275a":function(t,e,i){},"31ba":function(t,e,i){"use strict";var a=i("115c"),n=i.n(a);n.a},"3eab":function(t,e,i){"use strict";var a=i("01a2"),n=i.n(a);n.a},"4f59":function(t,e,i){"use strict";var a=i("275a"),n=i.n(a);n.a},"4ff9":function(t,e,i){},"533e":function(t,e,i){},"5a93":function(t,e,i){},"5c0b":function(t,e,i){"use strict";var a=i("5e27"),n=i.n(a);n.a},"5e27":function(t,e,i){},"75e9":function(t,e,i){},7884:function(t,e,i){"use strict";var a=i("7ccb"),n=i.n(a);n.a},"7c69":function(t,e,i){},"7c6d":function(t,e,i){"use strict";var a=i("0c72"),n=i.n(a);n.a},"7ccb":function(t,e,i){},"8d04":function(t,e,i){},"945e":function(t,e,i){"use strict";var a=i("7c69"),n=i.n(a);n.a},"99fc":function(t,e,i){"use strict";var a=i("75e9"),n=i.n(a);n.a},b3c2:function(t,e,i){"use strict";var a=i("e634"),n=i.n(a);n.a},bf9d:function(t,e,i){"use strict";var a=i("e303"),n=i.n(a);n.a},cd49:function(t,e,i){"use strict";i.r(e);i("cadf"),i("551c"),i("f751"),i("097d");var a=i("2b0e"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"zo-title",rawName:"v-zo-title",value:t.$route.meta.title,expression:"$route.meta.title"}],attrs:{id:"app"}},[i("keep-alive",[t.$route.meta.keepAlive?i("router-view"):t._e()],1),t.$route.meta.keepAlive?t._e():i("router-view")],1)},s=[],r=(i("5c0b"),i("2877")),o={},c=Object(r["a"])(o,n,s,!1,null,null,null),h=c.exports,u=i("8c4f"),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.items&&t.items.length>0?i("div",{staticClass:"box"},[i("ul",t._l(t.items,function(e,a){return i("li",{key:a,staticClass:"list-item",attrs:{"data-type":t.activeSwiper==a?1:0}},[i("div",{staticClass:"book-item",attrs:{"data-index":a},on:{"!touchstart":function(e){return t.touchStart(e)},"!touchend":function(e){return t.touchEnd(e)},click:function(i){return t.tapBook(e)}}},[i("div",{staticClass:"cover"},[i("img",{attrs:{src:e.cover}})]),i("div",{staticClass:"info"},[i("div",{staticClass:"name"},[t._v(t._s(e.name))]),i("div",{staticClass:"tag"},[t._v(t._s(e.author_name))]),i("div",{staticClass:"desc"},[t._v(t._s(t._f("ago")(e.read_at))+"· "+t._s(e.chapter_title))])])]),i("div",{staticClass:"delete",attrs:{"data-index":a},on:{click:t.deleteItem}},[t._v("删除")])])}),0)]):i("div",{staticClass:"empty"},[t._v("\n      您的书架空空如也\n    ")]),i("TabBar")],1)},f=[],d=i("d225"),p=i("b0b4"),v=i("308d"),g=i("6bb5"),m=i("4e2b"),y=i("9ab4"),b=i("60a3"),k=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("footer",{staticClass:"tab-bar"},t._l(t.menus,function(e,a){return i("a",{key:a,class:[e.url===t.$route.name?"active":""],on:{click:function(i){return t.tapMenu(e)}}},[i("i",{class:e.icon,attrs:{"aria-hidden":"true"}}),t._v("\n        "+t._s(e.name)+"\n    ")])}),0)},_=[],C=a["default"].extend({name:"TabBar",data:function(){return{menus:[{name:"书架",icon:"fa fa-book",url:"home"},{name:"分类",icon:"fa fa-th-large",url:"category"},{name:"搜索",icon:"fa fa-search",url:"search"},{name:"我的",icon:"fa fa-user",url:"member"}]}},methods:{tapMenu:function(t){this.$router.push({name:t.url})}}}),w=C,O=(i("99fc"),Object(r["a"])(w,k,_,!1,null,"1e211c44",null)),P=O.exports,x=(i("7f7f"),i("4917"),i("386d"),i("3b2b"),i("f499")),j=i.n(x),S="http://zodream.localhost/open/",$="http://zodream.localhost",M="11543906547",T="012e936d3d3653b40c6fc5a32e4ea685";function z(t,e){var i=e;"string"!==typeof e&&(i=j()(e)),window.localStorage.setItem(t,i)}function R(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=window.localStorage.getItem(t);return i&&e?JSON.parse(i):i}function E(t){window.localStorage.removeItem(t)}function A(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=window.sessionStorage.getItem(t);return i&&e?JSON.parse(i):i}function B(){var t=new Date,e=function(t){return t<10?"0"+t:t};return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDate())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())}var H="FOLLOW_BOOK",N="SET_BOOK",I="SET_CHAPTERS",F="SET_CHAPTER",W="SET_CATEGORIES",L="token",X="THEME_CONFIGS_KEY",q=function(){function t(){Object(d["a"])(this,t)}return Object(p["a"])(t,[{key:"get",value:function(){return R(H,!0)||{}}},{key:"getItems",value:function(){var t=[],e=this.get();for(var i in e)e.hasOwnProperty(i)&&t.push(e[i]);return t}},{key:"save",value:function(t){z(H,t)}},{key:"has",value:function(t){return this.get().hasOwnProperty(t)}},{key:"getItem",value:function(t){return this.has(t)?this.get()[t]:void 0}},{key:"remove",value:function(t){if(this.has(t)){var e=this.get();delete e[t],this.save(e)}}},{key:"add",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a={id:t.id,name:t.name,cover:t.cover,author_name:t.author?t.author.name:"",chapter_id:e.id,chapter_title:e.title+"",process:i,read_at:(new Date).getTime()},n=this.get();n[t.id]=a,this.save(n)}},{key:"update",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t.book_id){var i=this.get();i[t.book_id].chapter_id=t.id,i[t.book_id].chapter_title=t.title+"",i[t.book_id].process=e,i[t.book_id].read_at=(new Date).getTime(),this.save(i)}}},{key:"getTheme",value:function(){var t=R(X,!0);return t||{font:3,theme:0,old_theme:0,size:18,line:10,letter:4}}},{key:"saveTheme",value:function(t){z(X,t)}}]),t}(),D=new q,K=function(t){function e(){var t;return Object(d["a"])(this,e),t=Object(v["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.items=[],t.startX=0,t.endX=0,t.activeSwiper=-1,t}return Object(m["a"])(e,t),Object(p["a"])(e,[{key:"created",value:function(){this.items=D.getItems()}},{key:"tapBook",value:function(t){this.$router.push("/read/"+t.chapter_id)}},{key:"touchStart",value:function(t){this.startX=t.touches[0].clientX}},{key:"touchEnd",value:function(t){this.endX=t.changedTouches[0].clientX,this.startX-this.endX>30&&(this.activeSwiper=t.currentTarget.dataset.index),this.startX-this.endX<-30&&(this.activeSwiper=-1),this.startX=0,this.endX=0}},{key:"checkSlide",value:function(){return this.activeSwiper>-1}},{key:"deleteItem",value:function(t){var e=t.currentTarget.dataset.index;this.activeSwiper=-1;var i=this.items[e];this.items.splice(e,1),D.remove(i.id)}}]),e}(b["d"]);K=y["a"]([Object(b["a"])({components:{TabBar:P}})],K);var Y=K,V=Y,U=(i("31ba"),Object(r["a"])(V,l,f,!1,null,"0ec5b07a",null)),J=U.exports,G=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("BackHeader",{attrs:{title:"分类"}}),i("div",{staticClass:"box"},t._l(t.categories,function(e,a){return i("div",{key:a,staticClass:"item",on:{click:function(i){return t.tapCategory(e)}}},[t._v("\n            "+t._s(e.name)+"\n        ")])}),0),i("TabBar")],1)},Q=[],Z=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("header",[i("a",{staticClass:"back",on:{click:t.tapBack}},[i("i",{staticClass:"fa fa-chevron-left",attrs:{"aria-hidden":"true"}})]),i("span",{staticClass:"title"},[t._v("\n        "+t._s(t.title)+"\n    ")]),t._t("default")],2)},tt=[],et=a["default"].extend({data:function(){return{}},props:{title:String},methods:{tapBack:function(){window.history.length<=1?this.$router.push("/"):this.$router.go(-1)}}}),it=et,at=(i("7884"),Object(r["a"])(it,Z,tt,!1,null,"718157b0",null)),nt=at.exports,st=i("2f62"),rt={},ot={},ct=i("bd86"),ht=i("5d73"),ut=i.n(ht),lt=i("795b"),ft=i.n(lt),dt=(i("5fc6"),i("5af2")),pt=i.n(dt),vt=i("bc3a"),gt=i.n(vt),mt=i("9127");function yt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new ft.a(function(i,a){gt.a.get(t,{params:e}).then(function(t){i(t.data)}).catch(function(t){a(t)})})}function bt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new ft.a(function(i,a){gt.a.post(t,e).then(function(t){i(t.data)},function(t){a(t)})})}function kt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new ft.a(function(i,a){gt.a.patch(t,e).then(function(t){i(t.data)},function(t){a(t)})})}function _t(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new ft.a(function(i,a){gt.a.put(t,e).then(function(t){i(t.data)},function(t){a(t)})})}gt.a.defaults.timeout=6e4,gt.a.defaults.baseURL=S,gt.a.interceptors.request.use(function(t){t.data=j()(t.data),t.headers={"Content-Type":"application/vnd.api+json",Accept:"application/json"};var e=B(),i=mt["Md5"].hashStr(M+e+T);t.params||(t.params={}),t.params.appid=M,t.params.timestamp=e,t.params.sign=i;var a=A(L);return a&&(t.params.token=a),t},function(t){return ft.a.reject(t)}),gt.a.interceptors.response.use(function(t){return 2===t.data.errCode&&(xi.push({path:"/login",query:{redirect:xi.currentRoute.fullPath}}),pt()({message:t.data.Message,position:"bottom"})),t},function(t){return pt()({message:t,position:"bottom"}),ft.a.reject(t)});var Ct,wt={install:function(t){t.prototype.$post=bt,t.prototype.$fetch=yt,t.prototype.$patch=kt,t.prototype.$put=_t}},Ot=function(){return yt("book/home/hot")},Pt=function(t){return yt("book/home/suggest",{keywords:t})},xt=function(t){return yt("book",t)},jt=function(){return yt("book/category")},St=function(t){return yt("book",{id:t})},$t=function(t){return yt("book/chapter",{book:t})},Mt=function(t){return yt("book/chapter",{id:t})},Tt={bookInfo:null,chapters:[],categories:[]},zt={},Rt={getBook:function(t,e){return new ft.a(function(i,a){t.state.bookInfo&&t.state.bookInfo.id===e?i(t.state.bookInfo):St(e).then(function(e){t.commit(N,e),i(e)}).catch(a)})},getCategories:function(t){return new ft.a(function(e,i){t.state.categories&&t.state.categories.length>0?e(t.state.categories):jt().then(function(i){t.commit(W,i.data),e(i.data)}).catch(i)})},getChapters:function(t,e){return new ft.a(function(i,a){t.state.chapters.length>0&&t.state.chapters[0].book_id===e?i(t.state.chapters):$t(e).then(function(e){t.commit(I,e.data),i(e.data)})})},getChapter:function(t,e){var i=function(){if(!t.state.chapters||t.state.chapters.length<1)return!1;var i=!0,a=!1,n=void 0;try{for(var s,r=ut()(t.state.chapters);!(i=(s=r.next()).done);i=!0){var o=s.value;if(o.id===e&&o.content)return o}}catch(c){a=!0,n=c}finally{try{i||null==r.return||r.return()}finally{if(a)throw n}}return!1};return new ft.a(function(a,n){var s=i();s?a(s):Mt(e).then(function(e){t.commit(F,e),a(e)})})}},Et=(Ct={},Object(ct["a"])(Ct,N,function(t,e){t.bookInfo=e}),Object(ct["a"])(Ct,W,function(t,e){t.categories=e}),Object(ct["a"])(Ct,I,function(t,e){t.chapters=e}),Object(ct["a"])(Ct,F,function(t,e){if(e&&t.chapters&&!(t.chapters.length<1)){for(var i=t.chapters,a=0;a<i.length;a++)e.id===i[a].id&&(i[a]=e);t.chapters=i}}),Ct),At={state:Tt,getters:zt,actions:Rt,mutations:Et};a["default"].use(st["a"]);var Bt=new st["a"].Store({actions:rt,getters:ot,modules:{book:At}}),Ht=function(t){return Bt.dispatch("getBook",t)},Nt=function(t){return Bt.dispatch("getChapters",t)},It=function(t){return Bt.dispatch("getChapter",t)},Ft=function(){return Bt.dispatch("getCategories")},Wt=function(t){function e(){var t;return Object(d["a"])(this,e),t=Object(v["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.categories=[],t}return Object(m["a"])(e,t),Object(p["a"])(e,[{key:"created",value:function(){var t=this;Ft().then(function(e){t.categories=e})}},{key:"tapCategory",value:function(t){this.$router.push({name:"bang",query:{category:t.id+"",title:t.name}})}}]),e}(b["d"]);Wt=y["a"]([Object(b["a"])({components:{BackHeader:nt,TabBar:P}})],Wt);var Lt,Xt=Wt,qt=Xt,Dt=(i("1a48"),Object(r["a"])(qt,G,Q,!1,null,"1e9d29af",null)),Kt=Dt.exports,Yt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("SearchBar",{attrs:{value:t.keywords},on:{input:t.updateVal,focus:t.tapFocusSearch,search:t.tapSearch}}),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.isSearch,expression:"!isSearch"}],staticClass:"has-header"},[i("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"box",attrs:{"infinite-scroll-disabled":"is_loading","infinite-scroll-distance":"10"}},t._l(t.items,function(t,e){return i("BookItem",{key:e,attrs:{book:t}})}),1)])],1)},Vt=[],Ut=(i("ac6a"),i("a4bb")),Jt=i.n(Ut),Gt=(i("951e"),i("24f6")),Qt=i.n(Gt),Zt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"book-item",on:{click:function(e){return t.tapBook()}}},[i("div",{staticClass:"cover"},[i("img",{attrs:{src:t.book.cover}}),t.book.click_count>0?i("div",{staticClass:"tip"},[t._v(t._s(t._f("size")(t.book.click_count))+"人气")]):t._e()]),i("div",{staticClass:"info"},[i("div",{staticClass:"name"},[t._v(t._s(t.book.name))]),i("div",{staticClass:"tag"},[t._v(t._s(t.book.author.name)+"·"+t._s(t.book.category.name)+"·"+t._s(t._f("status")(t.book.over_at))+"·"+t._s(t._f("size")(t.book.size))+"字")]),i("div",{staticClass:"desc"},[t._v(t._s(t.book.description))])])])},te=[],ee=function(t){function e(){return Object(d["a"])(this,e),Object(v["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(m["a"])(e,t),Object(p["a"])(e,[{key:"tapBook",value:function(){this.$router.push("/book/"+this.book.id)}}]),e}(b["d"]);y["a"]([Object(b["c"])(Object),y["b"]("design:type","function"===typeof(Lt=!1)?Lt:Object)],ee.prototype,"book",void 0),ee=y["a"]([b["a"]],ee);var ie=ee,ae=ie,ne=(i("e7ba"),Object(r["a"])(ae,Zt,te,!1,null,"326b30e0",null)),se=ne.exports,re=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("SearchHeader",{attrs:{value:t.value},on:{input:t.updateVal,enter:t.tapSearch,keyup:t.onKeyUp,focus:t.tapFocus}}),t.isMini?t._e():i("div",{staticClass:"has-header"},[t.tip_list&&0!=t.tip_list.length?i("ul",{staticClass:"search-tip-box"},t._l(t.tip_list,function(e,a){return i("li",{key:a},[i("a",{on:{click:function(i){return t.tapSearch(e)}}},[t._v(t._s(e))])])}),0):i("div",{staticClass:"search-recommend-box"},[t.history_list&&t.history_list.length>0?i("div",{staticClass:"panel"},[i("div",{staticClass:"panel-header"},[i("span",[t._v("历史记录")]),i("i",{staticClass:"fa fa-trash",on:{click:t.tapClearHistory}})]),i("div",{staticClass:"panel-body"},t._l(t.history_list,function(e,a){return i("a",{key:a,on:{click:function(i){return t.tapSearch(e)}}},[t._v(t._s(e))])}),0)]):t._e(),t.hot_keywords&&t.hot_keywords.length>0?i("div",{staticClass:"panel"},[t._m(0),i("div",{staticClass:"panel-body"},t._l(t.hot_keywords,function(e,a){return i("a",{key:a,on:{click:function(i){return t.tapSearch(e)}}},[t._v(t._s(e))])}),0)]):t._e()])])],1)},oe=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"panel-header"},[i("span",[t._v("热门搜索")])])}],ce=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("header",[i("div",{staticClass:"search-box"},[i("div",{staticClass:"search-input"},[i("i",{staticClass:"fa fa-search",attrs:{"aria-hidden":"true"},on:{click:t.tapSearch}}),i("input",{attrs:{type:"text",placeholder:"搜索",autocomplete:"off"},domProps:{value:t.value},on:{input:function(e){return t.updateVal(e.target.value)},keyup:t.onKeyUp,click:t.tapFocus}}),t.currrent&&t.currrent.length>0?i("i",{staticClass:"fa fa-times-circle",on:{click:t.tapClear}}):t._e()]),i("a",{staticClass:"cancel-btn",on:{click:t.tapBack}},[t._v("取消")])])])},he=[],ue=a["default"].extend({data:function(){return{currrent:""}},props:["value"],methods:{tapBack:function(){this.value&&this.value.length>0?this.tapClear():window.history.length<=1?this.$router.push("/"):this.$router.go(-1)},updateVal:function(t){this.$emit("input",t),this.currrent=t},tapClear:function(){this.updateVal("")},onKeyUp:function(t){this.value&&0!==this.value.trim().length&&(13!==t.which?this.$emit("keyup",t):this.$emit("enter",this.value))},tapSearch:function(){this.$emit("enter",this.value)},tapFocus:function(){this.$emit("focus")}}}),le=ue,fe=(i("945e"),Object(r["a"])(le,ce,he,!1,null,"153f5999",null)),de=fe.exports,pe="KEYWORDS_HISTORY",ve=function(t){function e(){var t;return Object(d["a"])(this,e),t=Object(v["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.hot_keywords=[],t.tip_list=[],t.history_list=[],t.isMini=!1,t}return Object(m["a"])(e,t),Object(p["a"])(e,[{key:"created",value:function(){var t=this;this.isMini=Jt()(this.$route.query).length>0,this.history_list=R(pe,!0)||[],Ot().then(function(e){t.hot_keywords=e.data})}},{key:"updateVal",value:function(t){this.$emit("input",t),(!t||t.length<1)&&(this.tip_list=[],this.isMini=!1)}},{key:"tapClearHistory",value:function(){this.history_list=[],E(pe)}},{key:"addHistory",value:function(t){this.history_list.indexOf(t)>=0||(this.history_list.push(t),this.history_list.length>8&&this.history_list.splice(8),z(pe,this.history_list))}},{key:"onKeyUp",value:function(t){var e=this;!this.value||this.value.length<1?this.tip_list=[]:Pt(this.value).then(function(t){e.tip_list=t.data})}},{key:"tapSearch",value:function(t){t&&0!==t.trim().length&&(this.addHistory(t),this.$emit("search",t),this.isMini=!0)}},{key:"tapFocus",value:function(){this.isMini=!1}}]),e}(b["d"]);y["a"]([Object(b["c"])(String),y["b"]("design:type",String)],ve.prototype,"value",void 0),y["a"]([Object(b["b"])("focus"),y["b"]("design:type",Function),y["b"]("design:paramtypes",[]),y["b"]("design:returntype",void 0)],ve.prototype,"tapFocus",null),ve=y["a"]([Object(b["a"])({components:{SearchHeader:de}})],ve);var ge=ve,me=ge,ye=Object(r["a"])(me,re,oe,!1,null,"d483f140",null),be=ye.exports;b["d"].use(Qt.a);var ke=function(t){function e(){var t;return Object(d["a"])(this,e),t=Object(v["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.isSearch=!0,t.keywords="",t.categories=[],t.items=[],t.has_more=!0,t.page=1,t.is_loading=!1,t}return Object(m["a"])(e,t),Object(p["a"])(e,[{key:"created",value:function(){this.isSearch=0==Jt()(this.$route.query).length,this.isSearch||(this.category=this.$route.query.category,this.author=this.$route.query.author,this.keywords=this.$route.query.keywords+""),this.refresh()}},{key:"tapFocusSearch",value:function(){this.isSearch=!0}},{key:"updateVal",value:function(t){this.keywords=t,(!t||t.length<1)&&(this.isSearch=!0)}},{key:"tapCategory",value:function(t){}},{key:"loadMore",value:function(){this.goPage(++this.page)}},{key:"refresh",value:function(){this.items=[],this.is_loading=!1,this.has_more=!0,this.goPage(this.page=1)}},{key:"goPage",value:function(t){var e=this;!this.is_loading&&this.has_more&&(this.is_loading=!0,xt({keywords:this.keywords,category:this.category,author:this.author,page:t}).then(function(t){e.has_more=t.paging.more,e.is_loading=!1,t.data.forEach(function(t){e.items.push(t)})}))}},{key:"tapSearch",value:function(t){this.keywords=t,this.isSearch=!1}},{key:"tapEnterSearch",value:function(){this.keywords=this.keywords,this.isSearch=!0}},{key:"tapNewSearch",value:function(){this.keywords=this.keywords="",this.isSearch=!0}}]),e}(b["d"]);ke=y["a"]([Object(b["a"])({components:{BookItem:se,SearchBar:be}})],ke);var _e=ke,Ce=_e,we=(i("b3c2"),Object(r["a"])(Ce,Yt,Vt,!1,null,"406f5cf6",null)),Oe=we.exports,Pe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("header",[i("a",{staticClass:"back",on:{click:t.tapBack}},[i("i",{staticClass:"fa fa-chevron-left",attrs:{"aria-hidden":"true"}})]),t._m(0),i("div",{staticClass:"cover"},[i("img",{attrs:{src:t.book.cover,alt:""}})]),i("div",{staticClass:"name"},[t._v(t._s(t.book.name))]),i("div",{staticClass:"tag"},[t.book.author?i("span",[t._v(t._s(t.book.author.name))]):t._e(),t._v("\n            ·\n            "),t.book.category?i("span",[t._v(t._s(t.book.category.name))]):t._e()])]),i("div",{staticClass:"tab-bar"},[i("a",{attrs:{href:""}},[i("span",[t._v(t._s(t._f("size")(t.book.size))+"字")]),i("span",[t._v(t._s(t._f("status")(t.book.over_at)))])]),i("a",{attrs:{href:""}},[i("span",[t._v(t._s(t._f("size")(t.book.click_count)))]),i("span",[t._v("点击")])]),i("a",{attrs:{href:""}},[i("span",[t._v(t._s(t._f("size")(t.book.chapter_count)))]),i("span",[t._v("章节")])])]),i("div",{staticClass:"line-item",on:{click:t.tapChapter}},[i("span",[t._v("目录")]),i("div",{staticClass:"right"},[t.book.last_chapter?i("span",[t._v("连载至"+t._s(t.book.last_chapter.title.substr(0,10)))]):t._e(),i("i",{staticClass:"fa fa-chevron-right"})])]),i("footer",[t.isFollow?i("a",{staticClass:"followed"},[i("i",{staticClass:"fa fa-check"}),t._v("\n            已在书架\n        ")]):i("a",{on:{click:t.tapFollow}},[i("i",{staticClass:"fa fa-plus"}),t._v("\n            加入书架\n        ")]),i("a",{on:{click:t.tapRead}},[t._v("\n            立即阅读\n        ")])])])},xe=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a",{staticClass:"more",attrs:{href:""}},[i("i",{staticClass:"fa fa-ellipsis-h"})])}],je=i("e814"),Se=i.n(je),$e=(i("8516"),i("e384")),Me=i.n($e);b["d"].component(Me.a.name,Me.a);var Te=function(t){function e(){var t;return Object(d["a"])(this,e),t=Object(v["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.isFollow=!1,t}return Object(m["a"])(e,t),Object(p["a"])(e,[{key:"created",value:function(){var t=this;this.book={id:Se()(this.$route.params.id)},this.isFollow=D.has(this.book.id),Ht(this.book.id).then(function(e){if(!e)return pt()("书籍已失联"),void t.tapBack();t.book=e,t.$route.meta.title=e.name,t.$forceUpdate()}).catch(function(e){pt()("书籍已失联"),t.tapBack()})}},{key:"tapBack",value:function(){window.history.length<=1?this.$router.push("/"):this.$router.go(-1)}},{key:"tapChapter",value:function(){this.book&&this.$router.push("/chapter/"+this.book.id)}},{key:"tapRead",value:function(){if(this.book&&this.book.first_chapter){var t=D.getItem(this.book.id);this.$router.push("/read/"+(t?t.chapter_id:this.book.first_chapter.id))}}},{key:"tapFollow",value:function(){this.book&&this.book.first_chapter&&(D.add(this.book,this.book.first_chapter,0),this.isFollow=!0,pt()("已成功加入书架"))}}]),e}(b["d"]);Te=y["a"]([b["a"]],Te);var ze=Te,Re=ze,Ee=(i("3eab"),Object(r["a"])(Re,Pe,xe,!1,null,"7fd61856",null)),Ae=Ee.exports,Be=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("BackHeader",{attrs:{title:"目录"}},[t.isSort?i("a",{staticClass:"right",on:{click:t.tapSort}},[i("i",{staticClass:"fa fa-arrow-down"}),t._v("\n            倒序\n        ")]):i("a",{staticClass:"right",on:{click:t.tapSort}},[i("i",{staticClass:"fa fa-arrow-up"}),t._v("\n            正序\n        ")])]),i("div",{staticClass:"box"},t._l(t.items,function(e){return i("div",{key:e.id,class:["item",t.activeChapter==e.id?"active":""],on:{click:function(i){return t.tapChapter(e)}}},[i("div",{staticClass:"title"},[t._v(t._s(e.title))]),i("div",{staticClass:"time"},[t._v(t._s(e.created_at))])])}),0)],1)},He=[],Ne=function(t){function e(){var t;return Object(d["a"])(this,e),t=Object(v["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.items=[],t.isSort=!1,t.activeChapter=0,t}return Object(m["a"])(e,t),Object(p["a"])(e,[{key:"created",value:function(){var t=this,e=Se()(this.$route.params.book);if(e){Nt(e).then(function(e){t.items=e});var i=D.getItem(e);i&&(this.activeChapter=i.chapter_id)}}},{key:"tapChapter",value:function(t){this.$router.push("/read/"+t.id)}},{key:"tapSort",value:function(){this.isSort=!this.isSort,this.items&&this.items.reverse()}}]),e}(b["d"]);Ne=y["a"]([Object(b["a"])({components:{BackHeader:nt}})],Ne);var Ie=Ne,Fe=Ie,We=(i("4f59"),Object(r["a"])(Fe,Be,He,!1,null,"270a3949",null)),Le=We.exports,Xe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.readMode>0?i("BackHeader",{attrs:{title:t.chapter.title}}):t._e(),i("ReadPager",{ref:"pager",attrs:{width:t.width,height:t.height,fontsize:t.configs.size,linespace:t.configs.line,letterspace:t.configs.letter,font:"font-"+t.configs.font,theme:"theme-"+t.configs.theme},on:{middle:t.tapMiddle,progress:t.tapProgress,prev:t.tapPrev,next:t.tapNext}}),t.readMode>0?i("footer",[i("div",{staticClass:"pager"},[i("a",{on:{click:t.tapPrev}},[t._v("上一章")]),i("mt-range",{attrs:{value:t.progress},on:{input:t.tapMoveProgress}}),i("a",{on:{click:t.tapNext}},[t._v("下一章")])],1),2==t.readMode?i("div",{staticClass:"setting"},[i("div",{staticClass:"theme-box"},t._l(t.theme_list,function(e,a){return i("span",{key:a,class:["theme-"+a,t.configs.theme==a?"active":""],on:{click:function(e){t.configs.theme=a}}})}),0),i("div",{staticClass:"font-box"},t._l(t.font_list,function(e,a){return i("span",{key:a,class:[t.configs.font==a?"active":""],on:{click:function(e){t.configs.font=a}}},[t._v(t._s(e))])}),0),i("div",{staticClass:"line-item"},[i("span",[t._v("字体大小")]),i("div",{staticClass:"size-box"},[i("i",{staticClass:"fa fa-minus",on:{click:function(e){return t.tapMinus("size")}}}),i("span",{staticClass:"lang"},[t._v(t._s(t.configs.size))]),i("i",{staticClass:"fa fa-plus",on:{click:function(e){return t.tapPlus("size")}}})])]),i("div",{staticClass:"line-item"},[i("span",[t._v("行距")]),i("div",{staticClass:"size-box"},[i("i",{staticClass:"fa fa-minus",on:{click:function(e){return t.tapMinus("line")}}}),i("span",{staticClass:"lang"},[t._v(t._s(t.configs.line))]),i("i",{staticClass:"fa fa-plus",on:{click:function(e){return t.tapPlus("line")}}})])]),i("div",{staticClass:"line-item"},[i("span",[t._v("间距")]),i("div",{staticClass:"size-box"},[i("i",{staticClass:"fa fa-minus",on:{click:function(e){return t.tapMinus("letter")}}}),i("span",{staticClass:"lang"},[t._v(t._s(t.configs.letter))]),i("i",{staticClass:"fa fa-plus",on:{click:function(e){return t.tapPlus("letter")}}})])])]):t._e(),i("div",{staticClass:"tab-bar"},[i("a",{on:{click:t.tapChapter}},[i("i",{staticClass:"fa fa-bars"}),t._v("\n                目录\n            ")]),i("a",{class:7==t.configs.theme?"active":"",on:{click:t.tapEye}},[i("i",{staticClass:"fa fa-eye"}),t._v("\n                夜间\n            ")]),i("a",{class:2==t.readMode?"active":"",on:{click:t.tapSetting}},[i("i",{staticClass:"fa fa-cog"}),t._v("\n                设置\n            ")])])]):t._e(),i("SliderMenu",{directives:[{name:"show",rawName:"v-show",value:4==t.readMode,expression:"readMode == 4"}],ref:"slider",attrs:{chapter:t.chapter.id},on:{read:t.tapRead}}),4==t.readMode?i("div",{staticClass:"dialog-mask",on:{click:function(e){t.readMode=0}}}):t._e()],1)},qe=[],De=(i("ceaa"),i("b2fb")),Ke=i.n(De),Ye=(i("b6ce"),i("5441")),Ve=i.n(Ye),Ue=(i("873f"),i("e333")),Je=i.n(Ue),Ge=i("65d9"),Qe=i.n(Ge),Ze=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{class:["pager",t.font],style:{color:t.color,"font-size":t.fontsize+"px "},on:{touchstart:t.touchstart,touchmove:t.touchmove,touchend:t.touchend}},[i("div",{ref:"prevPage",class:["prev-page",t.theme]}),i("div",{ref:"currentPage",class:["current-page",t.theme]}),i("div",{ref:"nextPage",class:["next-page",t.theme]})])])},ti=[],ei=(i("9ec8"),i("c5f6"),function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.getLines(e);Object(d["a"])(this,t),this.text=e,this.lines=i}return Object(p["a"])(t,[{key:"drawCanvas",value:function(e,i,a,n,s,r,o){var c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"#000",l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:"微软雅黑";t.drawCanvasWithFonts(e,this.getOnePage(i,a,n,s,r,o,c,h),a+"px "+l,u)}},{key:"toHtml",value:function(e,i,a,n,s,r){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"#000",u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"微软雅黑";return t.toHtmlWithFonts(this.getOnePage(e,i,a,n,s,r,o,c),i+"px "+u,h)}},{key:"getOnePage",value:function(t,e,i,a,n,s){var r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,c=e+a,h=e+i,u=Math.floor(n/c),l=Math.floor(s/h),f=this.getPageLines(t,u,l),d=[];if(f.length<1)return d;for(var p=0;p<f.length;p++)for(var v=f[p],g=0;g<v.length;g++)d.push({code:this.text.charAt(v.start+g),x:r+(g+(v.isNew?2:0))*c,y:o+p*h});return d}},{key:"getPageCount",value:function(e,i){var a=0,n=!0,s=!1,r=void 0;try{for(var o,c=ut()(this.lines);!(n=(o=c.next()).done);n=!0){var h=o.value;a+=t.toLineCount(h,e)}}catch(u){s=!0,r=u}finally{try{n||null==c.return||c.return()}finally{if(s)throw r}}return Math.ceil(a/i)}},{key:"getPageCountWithSize",value:function(t,e,i,a,n){var s=t+i,r=t+e,o=Math.floor(a/s),c=Math.floor(n/r);return this.getPageCount(o,c)}},{key:"getPageLines",value:function(e,i,a){var n=e>1?(e-1)*a:0,s=n+a,r=[],o=0,c=!0,h=!1,u=void 0;try{for(var l,f=ut()(this.lines);!(c=(l=f.next()).done);c=!0){var d=l.value,p=t.toLineCount(d,i);if(o<s&&o+p>n)for(var v=Math.max(n-o,0),g=Math.min(p,s-o);v<g;v++){var m=v*i-(v<1?0:2);r.push({start:d.start+m,length:Math.min(i-(v<1?2:0),d.length-v*i+2),isNew:v<1})}o+=p}}catch(y){h=!0,u=y}finally{try{c||null==f.return||f.return()}finally{if(h)throw u}}return r}}],[{key:"getLines",value:function(t){if(!t||t.length<1)return[];for(var e,i=10,a=14,n=32,s=12288,r=9,o=[],c=-1,h=-1,u=0;u<t.length;u++)e=t.charCodeAt(u),c<0&&(e===i||e===a||e===n||e===s||e===r)||(c<0?c=u:e!==i&&e!==a?e!==n&&e!==s&&e!==r?h=-1:h<0&&(h=u):(o.push({start:c,length:(h>0?h:u)-c}),h=c=-1));return c>0&&o.push({start:c,length:(h>0?h:u+1)-c}),o}},{key:"drawCanvasWithFonts",value:function(t,e,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#000";t.font=i,t.fillStyle=a,t.textAlign="center",t.textBaseline="middle";var n=!0,s=!1,r=void 0;try{for(var o,c=ut()(e);!(n=(o=c.next()).done);n=!0){var h=o.value;t.fillText(h.code,h.x,h.y)}}catch(u){s=!0,r=u}finally{try{n||null==c.return||c.return()}finally{if(s)throw r}}}},{key:"toHtmlWithFonts",value:function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var i="",a=!0,n=!1,s=void 0;try{for(var r,o=ut()(t);!(a=(r=o.next()).done);a=!0){var c=r.value;i+='<span style="position: absolute;top: '+c.y+"px;left: "+c.x+'px;">'+c.code+"</span>"}}catch(h){n=!0,s=h}finally{try{a||null==o.return||o.return()}finally{if(n)throw s}}return'<div style="position: relative;">'+i+"</div>"}},{key:"toLineCount",value:function(t,e){return Math.ceil((t.length+2)/e)}}]),t}()),ii=a["default"].extend({data:function(){var t=new ei("");return{pager:t,page:1,pageCount:0,startX:0,isSilde:!1,isRight:0}},props:{width:{type:Number,default:0},height:{type:Number,default:0},fontsize:{type:Number,default:18},linespace:{type:Number,default:10},letterspace:{type:Number,default:4},left:{type:Number,default:10},top:{type:Number,default:10},color:{type:String,default:"#333"},font:String,theme:String},methods:{getWidth:function(){return this.width<1?this.$parent.width:this.width},getHeight:function(){return this.height<1?this.$parent.height:this.height},isToRight:function(){return 1===this.isRight},isToLeft:function(){return 2===this.isRight},refreshPager:function(t){this.pager=new ei(t)},tapIfClick:function(t,e){var i=this.getWidth()/2;Math.abs(i-t)<50&&Math.abs(this.getHeight()/2-e)<50?this.$emit("middle"):(this.$emit("middle",!1),i>t?this.goPrev():this.goNext())},touchstart:function(t){this.startX=t.targetTouches[0].clientX,this.isRight=0,this.isSilde=!1},touchmove:function(t){if(this.isSilde=!0,this.$emit("middle",!1),3!==this.isRight){var e=t.targetTouches[0].clientX-this.startX;if(0===this.isRight){if(this.isRight=e<0?1:2,!this.readyPage())return}else if(this.isToRight()&&e>0||this.isToLeft()&&e<0)return;Math.abs(e)>this.getWidth()?this.isToRight()?this.applyNext():this.applyPrev():this.isToRight()?this.$refs.currentPage.style.left=e+"px":this.$refs.prevPage.style.left=e-this.getWidth()+"px"}},touchend:function(t){var e=this;if(this.isSilde){if(1===this.isRight||2===this.isRight){var i=t.changedTouches[0].clientX-this.startX;this.isToRight()&&i>0||this.isToLeft()&&i<0||(this.isToRight()?this.animation(this.$refs.currentPage,i,-this.getWidth(),function(){e.applyNext()}):this.animation(this.$refs.prevPage,i-this.getWidth(),0,function(){e.applyPrev()}))}}else this.tapIfClick(this.startX,t.changedTouches[0].clientY)},readyPage:function(){return this.isToRight()?this.readyNext():this.readyPrev()},readyPrev:function(){return this.page<2?(this.isRight=3,this.$emit("prev"),!1):(this.applyPage(this.$refs.prevPage,this.page-1),!0)},readyNext:function(){return this.page>=this.pageCount?(this.$emit("next"),!1):(this.applyPage(this.$refs.nextPage,this.page+1),!0)},applyNext:function(){this.page++,this.swapHtml(this.$refs.nextPage,this.$refs.currentPage),this.$refs.currentPage.style.left="0px",this.isRight=3,this.notifyProgress()},applyPrev:function(){this.page--,this.swapHtml(this.$refs.prevPage,this.$refs.currentPage),this.$refs.prevPage.style.left=1.1*-this.getWidth()+"px",this.isRight=3,this.notifyProgress()},animation:function(t,e,i,a){var n=e>i?-1:1,s=1,r=setInterval(function(){if(e+=s++*n,n>0&&e>=i||n<0&&e<=i)return clearInterval(r),t.style.left=i+"px",void a();t.style.left=e+"px"},16)},swapHtml:function(t,e){var i=!0,a=!1,n=void 0;try{for(var s,r=ut()(e.children);!(i=(s=r.next()).done);i=!0){var o=s.value;e.removeChild(o)}}catch(p){a=!0,n=p}finally{try{i||null==r.return||r.return()}finally{if(a)throw n}}var c=!0,h=!1,u=void 0;try{for(var l,f=ut()(t.children);!(c=(l=f.next()).done);c=!0){var d=l.value;e.appendChild(d)}}catch(p){h=!0,u=p}finally{try{c||null==f.return||f.return()}finally{if(h)throw u}}},applyPage:function(t,e){t.innerHTML=this.pager.toHtml(e,this.fontsize,this.linespace,this.letterspace,this.getWidth()-2*this.left,this.getHeight()-2*this.top,this.left,this.top)},refreshPage:function(){var t=this.pageCount;this.pageCount=this.pager.getPageCountWithSize(this.fontsize,this.linespace,this.letterspace,this.getWidth()-2*this.left,this.getHeight()-2*this.top),t>0&&this.pageCount!==t&&(this.page=Math.floor(this.page*this.pageCount/t),this.notifyProgress()),this.page<1?this.page=1:this.pageCount>0&&this.page>this.pageCount&&(this.page=this.pageCount),this.applyPage(this.$refs.currentPage,this.page)},notifyProgress:function(){this.$emit("progress",{page:this.page,count:this.pageCount,progress:Math.ceil(100*this.page/this.pageCount)})},goPager:function(t){this.page=t,this.refreshPage()},goProgress:function(t){this.goPager(Math.floor(t*this.pageCount/100))},goPrev:function(){var t=this;if(!this.readyPrev())return!1;this.animation(this.$refs.prevPage,-this.getWidth(),0,function(){t.applyPrev()})},goNext:function(){var t=this;if(!this.readyNext())return!1;this.animation(this.$refs.currentPage,0,-this.getWidth(),function(){t.applyNext()})}}}),ai=ii,ni=(i("eb48"),Object(r["a"])(ai,Ze,ti,!1,null,"713c1956",null)),si=ni.exports,ri=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"slider-box"},[i("header",[i("span",[t._v("目录")]),t.isSort?i("a",{staticClass:"right",on:{click:t.tapSort}},[i("i",{staticClass:"fa fa-arrow-down"}),t._v("\n            倒序\n        ")]):i("a",{staticClass:"right",on:{click:t.tapSort}},[i("i",{staticClass:"fa fa-arrow-up"}),t._v("\n            正序\n        ")])]),i("div",{staticClass:"box"},t._l(t.items,function(e){return i("div",{key:e.id,class:["item",e.id==t.chapter?"active":""],on:{click:function(i){return t.tapChapter(e)}}},[i("div",{staticClass:"title"},[t._v(t._s(e.title))]),i("div",{staticClass:"size"},[t._v(t._s(e.size))])])}),0)])},oi=[],ci=function(t){function e(){var t;return Object(d["a"])(this,e),t=Object(v["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.items=[],t.isSort=!1,t}return Object(m["a"])(e,t),Object(p["a"])(e,[{key:"refresh",value:function(t){var e=this;Nt(t).then(function(t){e.items=t})}},{key:"tapChapter",value:function(t){this.$emit("read",t)}},{key:"tapSort",value:function(){this.isSort=!this.isSort,this.items&&this.items.reverse()}}]),e}(b["d"]);y["a"]([Object(b["c"])(Number),y["b"]("design:type",Number)],ci.prototype,"chapter",void 0),ci=y["a"]([b["a"]],ci);var hi,ui=ci,li=ui,fi=(i("bf9d"),Object(r["a"])(li,ri,oi,!1,null,"361cc6f6",null)),di=fi.exports;b["d"].component(Je.a.name,Je.a),Qe.a.registerHooks(["beforeRouteLeave"]);var pi=function(t){function e(){var t;return Object(d["a"])(this,e),t=Object(v["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.width=0,t.height=0,t.progress=0,t.chapter={id:0},t.readMode=0,t.isReady=!1,t.isPagerReady=!1,t.theme_list=[0,1,2,3,4,5],t.font_list=["雅黑","宋体","楷书","启体"],t.configs={font:3,theme:0,old_theme:0,size:18,line:10,letter:4},t.size_round={size:[12,2,40],line:[2,1,40],letter:[1,1,40]},t}return Object(m["a"])(e,t),Object(p["a"])(e,[{key:"beforeRouteLeave",value:function(t,e,i){var a=this;this.chapter?D.has(this.chapter.book_id)?(this.recordFollow(),i()):Ve.a.confirm("是否将小说加入书架？").then(function(){a.recordFollow(),pt()("添加成功！"),i()},function(){i()}):i()}},{key:"created",value:function(){var t=this;It(Se()(this.$route.params.id)).then(function(e){t.chapter=e,t.refreshPager(),t.$refs.slider.refresh(e.book_id)}),this.configs=D.getTheme()}},{key:"mounted",value:function(){var t=this;this.isReady=!0,window.onresize=function(){t.refreshSize()},this.refreshSize(),this.refreshPager()}},{key:"recordFollow",value:function(){var t=this;this.chapter&&(D.has(this.chapter.book_id)?D.update(this.chapter,this.progress):Ht(this.chapter.book_id).then(function(e){D.add(e,t.chapter,t.progress)}))}},{key:"refreshSize",value:function(){var t=this.getClientSize();this.width=t.width,this.height=t.height}},{key:"getClientSize",value:function(){return void 0!==window.innerHeight?{width:window.innerWidth,height:window.innerHeight}:"CSS1Compat"===document.compatMode?{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}:{width:document.body.clientWidth,height:document.body.clientHeight}}},{key:"refreshPager",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isReady&&!this.isPagerReady&&(!this.chapter||this.chapter.id<1||(this.isPagerReady=!0,this.$route.meta.title=this.chapter.title,this.$refs.pager.refreshPager(this.chapter.content),this.goPager(t)))}},{key:"tapPrev",value:function(){var t=this;this.chapter&&this.chapter.previous?(Ke.a.open("获取《"+this.chapter.previous.title+"》中"),Mt(this.chapter.previous.id).then(function(e){Ke.a.close(),t.chapter=e,t.isPagerReady=!1,t.refreshPager()})):pt()("已到第一章节，无法前进了")}},{key:"tapRead",value:function(t){var e=this;this.readMode=0,this.chapter&&t.id==this.chapter.id||(this.chapter=t,Ke.a.open("获取《"+t.title+"》中"),Mt(t.id).then(function(t){Ke.a.close(),e.chapter=t,e.isPagerReady=!1,e.refreshPager()}))}},{key:"tapNext",value:function(){var t=this;this.chapter&&this.chapter.next?(Ke.a.open("获取《"+this.chapter.next.title+"》中"),Mt(this.chapter.next.id).then(function(e){Ke.a.close(),t.chapter=e,t.isPagerReady=!1,t.refreshPager()})):pt()("已到最新章节，没有更多了")}},{key:"tapProgress",value:function(t){this.progress=t.progress}},{key:"goPager",value:function(t){this.$refs.pager.goPager(t)}},{key:"tapMoveProgress",value:function(t){this.progress=t,this.$refs.pager.goProgress(t)}},{key:"tapMiddle",value:function(t){"undefined"!=typeof t?this.readMode>0&&(this.readMode=0):this.readMode=this.readMode>0?0:1}},{key:"tapSetting",value:function(){this.readMode=2}},{key:"tapEye",value:function(){7!=this.configs.theme?(this.configs.old_theme=this.configs.theme,this.configs.theme=7):this.configs.theme=this.configs.old_theme}},{key:"tapMinus",value:function(t){if(this.configs.hasOwnProperty(t)){this.configs[t]=Math.min(Math.max(this.configs[t]-this.size_round[t][1],this.size_round[t][0]),this.size_round[t][2]),this.$refs.pager.refreshPage()}}},{key:"tapPlus",value:function(t){this.configs.hasOwnProperty(t)&&(this.configs[t]=Math.min(Math.max(this.configs[t]+this.size_round[t][1],this.size_round[t][0]),this.size_round[t][2]),this.$refs.pager.refreshPage())}},{key:"onThemeChange",value:function(t,e){D.saveTheme(this.configs)}},{key:"tapChapter",value:function(){this.readMode=4}}]),e}(b["d"]);y["a"]([Object(b["e"])("configs",{deep:!0}),y["b"]("design:type",Function),y["b"]("design:paramtypes",["function"===typeof(hi=!1)?hi:Object,Object]),y["b"]("design:returntype",void 0)],pi.prototype,"onThemeChange",null),pi=y["a"]([Qe()({components:{ReadPager:si,BackHeader:nt,SliderMenu:di}})],pi);var vi=pi,gi=vi,mi=(i("7c6d"),i("d246"),Object(r["a"])(gi,Xe,qe,!1,null,"19f83a32",null)),yi=mi.exports,bi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("BackHeader",{attrs:{title:t.title}}),i("div",{staticClass:"has-header"},[i("div",{staticClass:"tab-header"},t._l(t.tabs,function(e,a){return i("a",{key:a,class:t.activeTab==a?"active":"",on:{click:function(e){return t.tapTab(a)}}},[t._v(t._s(e.name))])}),0),i("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"box",attrs:{"infinite-scroll-disabled":"is_loading","infinite-scroll-distance":"10"}},t._l(t.items,function(t,e){return i("BookItem",{key:e,attrs:{book:t}})}),1)])],1)},ki=[];b["d"].use(Qt.a);var _i=function(t){function e(){var t;return Object(d["a"])(this,e),t=Object(v["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.tabs=[{name:"总榜",key:"all"},{name:"月榜",key:"month"},{name:"周榜",key:"week"}],t.activeTab=0,t.category=0,t.title="分类榜单",t.items=[],t.has_more=!0,t.page=1,t.is_loading=!1,t}return Object(m["a"])(e,t),Object(p["a"])(e,[{key:"created",value:function(){this.category=Se()(this.$route.query.category),this.title=this.$route.meta.title=this.$route.query.title+"榜单",this.refresh()}},{key:"tapTab",value:function(t){this.activeTab=t,this.refresh()}},{key:"loadMore",value:function(){this.goPage(++this.page)}},{key:"refresh",value:function(){this.items=[],this.is_loading=!1,this.has_more=!0,this.goPage(this.page=1)}},{key:"goPage",value:function(t){var e=this;!this.is_loading&&this.has_more&&(this.is_loading=!0,xt({category:this.category,top:this.tabs[this.activeTab].key,page:t}).then(function(t){e.has_more=t.paging.more,e.is_loading=!1,t.data.forEach(function(t){e.items.push(t)})}))}}]),e}(b["d"]);_i=y["a"]([Object(b["a"])({components:{BackHeader:nt,BookItem:se}})],_i);var Ci=_i,wi=Ci,Oi=(i("d8a5"),Object(r["a"])(wi,bi,ki,!1,null,"b4a55b28",null)),Pi=Oi.exports;a["default"].use(u["a"]);var xi=new u["a"]({routes:[{path:"/",name:"home",component:J,meta:{title:"我的书架"}},{path:"/category",name:"category",component:Kt,meta:{title:"分类"}},{path:"/bang",name:"bang",component:Pi,meta:{title:"分类榜单"}},{path:"/search",name:"search",component:Oe,meta:{title:"搜索"}},{path:"/book/:id",name:"book",component:Ae,meta:{title:"书籍信息"}},{path:"/chapter/:book",name:"chapter",component:Le,meta:{title:"书籍目录"}},{path:"/read/:id",name:"read",component:yi,meta:{title:"阅读"}}]});function ji(t,e){if(void 0!==t&&window.document.title!==t&&(document.title=t,e)){var i=navigator.userAgent.toLowerCase();if(/iphone|ipad|ipod/.test(i)){var a=document.createElement("iframe");a.style.display="none",a.setAttribute("src",e||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7");var n=function t(){setTimeout(function(){a.removeEventListener("load",t),document.body.removeChild(a)},0)};a.addEventListener("load",n),document.body.appendChild(a)}}}var Si={install:function(t){t.directive("zo-title",function(t,e){ji(e.value,t.getAttribute("img-set")||null)})}};i("f559");function $i(t){return t?t.indexOf("//")>=0?t:t.startsWith("/")?$+t:$+"/"+t:null}function Mi(t){return t<1e4?t+"":Math.floor(t/1e4)+"万"}function Ti(t){return t>0?"完本":"连载"}function zi(t){var e=new Date,i=Math.floor((e.getTime()-t)/1e3);if(i<1)return"刚刚";if(i<60)return i+"秒前";if(i<3600)return Math.floor(i/60)+"分钟前";if(i<86400)return Math.floor(i/3600)+"小时前";if(i<2592e3)return Math.floor(i/86400)+"天前";var a=new Date(t);return a.getFullYear()===e.getFullYear()?a.getMonth()+1+"月"+a.getDate():a.getFullYear()+"年"+(a.getMonth()+1)+"月"}i("15f5");a["default"].filter("assets",$i),a["default"].filter("status",Ti),a["default"].filter("size",Mi),a["default"].filter("ago",zi),a["default"].use(wt),a["default"].use(Si),xi.beforeEach(function(t,e,i){var a=A(L);t.meta.requireAuth?a&&a.length>0?i():i({path:"/login",query:{redirect:t.fullPath}}):i()}),new a["default"]({router:xi,store:Bt,render:function(t){return t(h)}}).$mount("#app")},d246:function(t,e,i){"use strict";var a=i("533e"),n=i.n(a);n.a},d8a5:function(t,e,i){"use strict";var a=i("5a93"),n=i.n(a);n.a},e303:function(t,e,i){},e634:function(t,e,i){},e7ba:function(t,e,i){"use strict";var a=i("4ff9"),n=i.n(a);n.a},eb48:function(t,e,i){"use strict";var a=i("16af"),n=i.n(a);n.a}});
//# sourceMappingURL=app.9589ed7d.js.map