var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var Eve = (function () {
    function Eve() {
    }
    Eve.prototype.on = function (event, callback) {
        this.options['on' + event] = callback;
        return this;
    };
    Eve.prototype.hasEvent = function (event) {
        return this.options.hasOwnProperty('on' + event);
    };
    Eve.prototype.trigger = function (event) {
        var args = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            args[_i - 1] = arguments[_i];
        }
        var realEvent = 'on' + event;
        if (!this.hasEvent(event)) {
            return;
        }
        return (_a = this.options[realEvent]).call.apply(_a, [this].concat(args));
        var _a;
    };
    return Eve;
}());
var Box = (function (_super) {
    __extends(Box, _super);
    function Box() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Box.prototype.showPosition = function () {
        this.setPosition();
        this.box.show();
        return this;
    };
    Box.prototype.setPosition = function () {
        var offset = this.element.offset();
        var x = offset.left - $(window).scrollLeft();
        var y = offset.top + this.element.outerHeight() - $(window).scrollTop();
        this.box.css({ left: x + "px", top: y + "px" });
        return this;
    };
    /**
     * 根据可能是相对值获取绝对值
     * @param abservable
     * @param reltive
     */
    Box.getReal = function (abservable, reltive) {
        if (reltive > 1) {
            return reltive;
        }
        return abservable * reltive;
    };
    return Box;
}(Eve));
var Uri = (function () {
    function Uri(_path, _data) {
        if (_path === void 0) { _path = ''; }
        if (_data === void 0) { _data = {}; }
        this._path = _path;
        this._data = _data;
        if (_path.indexOf('?') >= 0) {
            _a = this._parseUrl(_path), _path = _a[0], _data = _a[1];
        }
        var _a;
    }
    Uri.prototype.setData = function (key, val) {
        if (typeof key == 'object') {
            this._data = $.extend(this._data, key);
        }
        else {
            this._data[key] = val;
        }
        return this;
    };
    Uri.prototype.clearData = function () {
        this._data = {};
        return this;
    };
    Uri.prototype.get = function (success, dataType) {
        $.get(this.toString(), success, dataType);
    };
    Uri.prototype.getJson = function (success) {
        $.getJSON(this.toString(), success);
    };
    Uri.prototype.post = function (data, success, dataType) {
        $.post(this.toString(), data, success, dataType);
    };
    Uri.parse = function (url) {
        if (typeof url == 'object') {
            return url;
        }
        return new Uri(url);
    };
    Uri.prototype.toString = function () {
        var param = Uri.getData(this._data);
        if (param == '') {
            return this._path;
        }
        return this._path + '?' + param;
    };
    Uri.getData = function (args) {
        if ('object' != typeof args) {
            return args;
        }
        var value = '';
        $.each(args, function (key, item) {
            value += Uri._filterValue(item, key);
        });
        return value.substring(0, value.length - 1);
    };
    Uri._filterValue = function (data, pre) {
        if (typeof data != 'object') {
            return pre + "=" + data + "&";
        }
        var value = '';
        var isArray = data instanceof Array;
        $.each(data, function (key, item) {
            value += Uri._filterValue(item, pre + (isArray ? "[]" : "[" + key + "]"));
        });
        return value;
    };
    Uri.prototype._parseUrl = function (url) {
        var _a = url.split('?', 2), path = _a[0], param = _a[1];
        if (!param) {
            return [path, {}];
        }
        var ret = {}, seg = param.split('&'), len = seg.length, i = 0, s; //len = 2
        for (; i < len; i++) {
            if (!seg[i]) {
                continue;
            }
            s = seg[i].split('=');
            ret[s[0]] = s[1];
        }
        return [path, ret];
    };
    return Uri;
}());
/**
 * 分页
 */
var Page = (function (_super) {
    __extends(Page, _super);
    function Page(element, option) {
        var _this = _super.call(this) || this;
        _this.element = element;
        _this.options = $.extend({}, new PageDefaultOption(), option);
        _this.options.url = Uri.parse(_this.options.url);
        _this.options.deleteUrl = Uri.parse(_this.options.deleteUrl);
        _this.options.updateUrl = Uri.parse(_this.options.updateUrl);
        _this.init();
        _this.search();
        return _this;
    }
    Page.prototype.init = function () {
        var instance = this;
        this._body = this.element.find(this.options.pageBody);
        this._searchForm = this.element.find(this.options.searchForm);
        this._pager = $('<ul class="pager"></ul>').pager({
            paginate: function (page) {
                instance.search('page', page);
            }
        });
        this._checkAll = this.element.find('.checkAll');
        this.element.append(this._pager.element);
        this._bindEvent();
    };
    Page.prototype.checkAll = function () {
        this._body.find(".checkbox").addClass('checked');
    };
    Page.prototype.getCheckedRow = function () {
        var data = [];
        var instance = this;
        this._body.find('.checkbox.checked').each(function (i, el) {
            data.push($(el).parents(instance.options.row));
        });
        return data;
    };
    Page.prototype.getChecked = function () {
        var data = [];
        var instance = this;
        $.each(this.getCheckedRow(), function (i, item) {
            data.push(item.attr(instance.options.idTag));
        });
        return data;
    };
    /**
     * 排序
     * @param name
     * @param order
     */
    Page.prototype.sort = function (name, order) {
        this.search({
            sort: name,
            order: order
        });
    };
    /**
     * 搜索
     * @param name
     * @param val
     */
    Page.prototype.search = function (name, val) {
        if (name === void 0) { name = {}; }
        if (typeof name != 'object') {
            name = (_a = {}, _a[name] = val, _a);
        }
        if (!name.hasOwnProperty('page')) {
            name['page'] = 1;
        }
        this.options.url.setData(name);
        this.refresh();
        var _a;
    };
    /**
     * 删除选中
     */
    Page.prototype.deleteChecked = function () {
        var elements = this.getCheckedRow();
        var instance = this;
        var data = [];
        elements.forEach(function (item) {
            data.push(item.attr(instance.options.idTag));
        });
        this.deleteId.apply(this, data);
    };
    Page.prototype.deleteRow = function (element) {
        var id = element.attr(this.options.idTag);
        if (!id) {
            return;
        }
        this.deleteId(id);
    };
    /**
     * 获取id标记
     */
    Page.prototype._getIdTag = function () {
        return this.options.idTag.replace('data-', '');
    };
    Page.prototype.deleteId = function () {
        var data = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            data[_i] = arguments[_i];
        }
        if (data.length == 0) {
            return;
        }
        var instance = this;
        if (false == this.trigger.apply(this, ['delete'].concat(data))) {
            console.log('delete is stop!');
            return;
        }
        this.options.deleteUrl.setData(this._getIdTag(), data).post({}, function (data) {
            if (data.code == 200) {
                instance.refresh();
            }
        }, 'json');
    };
    Page.prototype.refresh = function () {
        var instance = this;
        if (this.options.beforeQuery
            && this.options.beforeQuery.call(this) == false) {
            console.log('query is stop!');
            return;
        }
        this.options.url.getJson(function (data) {
            if (instance.options.afterQuery) {
                instance.options.afterQuery.call(this, data);
            }
            if (data.code != 200) {
                console.log(data);
                return;
            }
            instance._createBody(data.data.pagelist);
            instance._pager.change(data.data.page, Math.ceil(data.data.total / data.data.pageSize));
        });
    };
    /**
     * 判断是否为空值
     * @param val
     */
    Page.prototype._checkEmpty = function (val) {
        return !val || val == '' || val.trim() == '';
    };
    Page.prototype.updateColumn = function (element) {
        var name = element.attr('data-name');
        if (this._checkEmpty(name)) {
            return;
        }
        var id = element.parents(this.options.row).attr(this.options.idTag);
        if (this._checkEmpty(id)) {
            return;
        }
        if (this.options.beforeUpdate
            && false == this.options.beforeUpdate.call(this, element, id)) {
            return;
        }
        var instance = this;
        var input = $('<input type="text">');
        input.val(element.text());
        input.blur(function () {
            var val = input.val();
            input.remove();
            element.text(val);
            instance.updateData(id, name, val);
        });
        element.html('').append(input);
        input.focus();
    };
    Page.prototype.updateData = function (id, name, val) {
        if (false == this.trigger('update', id, name, val)) {
            console.log('update is stop!');
            return;
        }
        this.options.updateUrl.post((_a = {},
            _a[this._getIdTag()] = id,
            _a.name = name,
            _a.value = val,
            _a), function (data) {
        }, 'json');
        var _a;
    };
    Page.prototype._bindEvent = function () {
        var instance = this;
        this._searchForm.submit(function () {
            console.log($(this).serializeArray());
            instance.search($(this).serializeArray());
            return false;
        });
        this.element.find(this.options.sortRow + '>*').click(function () {
            var $this = $(this);
            var name = $this.attr('data-name');
            if (instance._checkEmpty(name)) {
                return;
            }
            if ($this.hasClass('sort-asc')) {
                $this.removeClass().addClass('sort-desc');
                instance.sort(name, 'desc');
            }
            else {
                $this.removeClass().addClass('sort-asc');
                instance.sort(name, 'asc');
            }
        });
        this._checkAll.click(function () {
            var $this = $(this);
            if ($this.hasClass('checked')) {
                $this.removeClass('checked');
                return;
            }
            instance._checkAll.addClass('checked');
            instance._body.find('.checkbox').addClass('checked');
        });
        this.element.find('.deleteAll').click(function () {
            var $this = $(this);
            var tip = $this.attr('data-tip') || instance.options.deleteTip;
            if (confirm(tip)) {
                instance.deleteChecked();
            }
        });
        this.element.find(this.options.filterRow + ' input').blur(function () {
            instance._searchElement($(this));
        });
        this.element.find(this.options.filterRow + ' select').change(function () {
            instance._searchElement($(this));
        });
        this._body.on("click", '.delete', function () {
            var $this = $(this);
            var tip = $this.attr('data-tip') || instance.options.deleteTip;
            if (confirm(tip)) {
                instance.deleteRow($this.parents(instance.options.row));
            }
        });
        this._body.on("click", '.checkbox', function () {
            var $this = $(this);
            if ($this.hasClass('checked')) {
                $this.removeClass('checked');
                instance._checkAll.removeClass('checked');
                return;
            }
            $this.addClass('checked');
        });
        this._body.on('click', this.options.column, function () {
            instance.updateColumn($(this));
        });
    };
    Page.prototype._searchElement = function (element) {
        var name = element.attr('name');
        if (!name) {
            return;
        }
        this.search(name, element.val());
    };
    Page.prototype._createBody = function (data) {
        var html = '';
        if (typeof data == 'object') {
            var instance_1 = this;
            $.each(data, function (i, item) {
                html += instance_1.options.createRow(item);
            });
        }
        else {
            html = data;
        }
        this._body.html(html);
    };
    Page.prototype.delete = function (callback) {
        return this.on('delete', callback);
    };
    Page.prototype.update = function (callback) {
        return this.on('update', callback);
    };
    return Page;
}(Box));
var PageDefaultOption = (function () {
    function PageDefaultOption() {
        this.url = 'query';
        this.updateUrl = 'update';
        this.deleteUrl = 'delete';
        this.idTag = 'data-id';
        this.searchForm = '.page-search';
        this.deleteTip = '确定删除？';
        this.pageBody = '.page-body';
        this.filterRow = '.filter-row';
        this.sortRow = '.sort-row';
        this.row = 'tr';
        this.column = 'td';
    }
    return PageDefaultOption;
}());
;
(function ($) {
    $.fn.page = function (option) {
        return new Page(this, option);
    };
})(jQuery);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV2ZW50LnRzIiwiYm94LnRzIiwidXJpLnRzIiwianF1ZXJ5LnBhZ2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0lBQUE7SUFtQkEsQ0FBQTtJQWhCQSxnQkFBQSxHQUFBLFVBQUEsS0FBQSxFQUFBLFFBQUE7UUFDQSxJQUFBLENBQUEsT0FBQSxDQUFBLElBQUEsR0FBQSxLQUFBLENBQUEsR0FBQSxRQUFBLENBQUE7UUFDQSxNQUFBLENBQUEsSUFBQSxDQUFBO0lBQ0EsQ0FBQTtJQUVBLHNCQUFBLEdBQUEsVUFBQSxLQUFBO1FBQ0EsTUFBQSxDQUFBLElBQUEsQ0FBQSxPQUFBLENBQUEsY0FBQSxDQUFBLElBQUEsR0FBQSxLQUFBLENBQUEsQ0FBQTtJQUNBLENBQUE7SUFFQSxxQkFBQSxHQUFBLFVBQUEsS0FBQTtRQUFBLGNBQUE7YUFBQSxVQUFBLEVBQUEscUJBQUEsRUFBQSxJQUFBO1lBQUEsNkJBQUE7O1FBQ0EsSUFBQSxTQUFBLEdBQUEsSUFBQSxHQUFBLEtBQUEsQ0FBQTtRQUNBLEVBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFBLFFBQUEsQ0FBQSxLQUFBLENBQUEsQ0FBQSxDQUFBLENBQUE7WUFDQSxNQUFBLENBQUE7UUFDQSxDQUFBO1FBQ0EsTUFBQSxDQUFBLENBQUEsS0FBQSxJQUFBLENBQUEsT0FBQSxDQUFBLFNBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxZQUFBLElBQUEsU0FBQSxJQUFBLEdBQUE7O0lBQ0EsQ0FBQTtJQUNBLFVBQUE7QUFBQSxDQW5CQSxBQW1CQSxJQUFBO0FDbkJBO0lBQUEsdUJBQUE7SUFBQTs7SUFnQ0EsQ0FBQTtJQTFCQSwwQkFBQSxHQUFBO1FBQ0EsSUFBQSxDQUFBLFdBQUEsRUFBQSxDQUFBO1FBQ0EsSUFBQSxDQUFBLEdBQUEsQ0FBQSxJQUFBLEVBQUEsQ0FBQTtRQUNBLE1BQUEsQ0FBQSxJQUFBLENBQUE7SUFDQSxDQUFBO0lBRUEseUJBQUEsR0FBQTtRQUNBLElBQUEsTUFBQSxHQUFBLElBQUEsQ0FBQSxPQUFBLENBQUEsTUFBQSxFQUFBLENBQUE7UUFDQSxJQUFBLENBQUEsR0FBQSxNQUFBLENBQUEsSUFBQSxHQUFBLENBQUEsQ0FBQSxNQUFBLENBQUEsQ0FBQSxVQUFBLEVBQUEsQ0FBQTtRQUNBLElBQUEsQ0FBQSxHQUFBLE1BQUEsQ0FBQSxHQUFBLEdBQUEsSUFBQSxDQUFBLE9BQUEsQ0FBQSxXQUFBLEVBQUEsR0FBQSxDQUFBLENBQUEsTUFBQSxDQUFBLENBQUEsU0FBQSxFQUFBLENBQUE7UUFDQSxJQUFBLENBQUEsR0FBQSxDQUFBLEdBQUEsQ0FBQSxFQUFBLElBQUEsRUFBQSxDQUFBLEdBQUEsSUFBQSxFQUFBLEdBQUEsRUFBQSxDQUFBLEdBQUEsSUFBQSxFQUFBLENBQUEsQ0FBQTtRQUNBLE1BQUEsQ0FBQSxJQUFBLENBQUE7SUFDQSxDQUFBO0lBR0E7Ozs7T0FJQTtJQUNBLFdBQUEsR0FBQSxVQUFBLFVBQUEsRUFBQSxPQUFBO1FBQ0EsRUFBQSxDQUFBLENBQUEsT0FBQSxHQUFBLENBQUEsQ0FBQSxDQUFBLENBQUE7WUFDQSxNQUFBLENBQUEsT0FBQSxDQUFBO1FBQ0EsQ0FBQTtRQUNBLE1BQUEsQ0FBQSxVQUFBLEdBQUEsT0FBQSxDQUFBO0lBQ0EsQ0FBQTtJQUNBLFVBQUE7QUFBQSxDQWhDQSxBQWdDQSxDQWhDQSxHQUFBLEdBZ0NBO0FDaENBO0lBQ0EsYUFDQSxLQUFBLEVBQ0EsS0FBQTtRQURBLHNCQUFBLEVBQUEsVUFBQTtRQUNBLHNCQUFBLEVBQUEsVUFBQTtRQURBLFVBQUEsR0FBQSxLQUFBLENBQUE7UUFDQSxVQUFBLEdBQUEsS0FBQSxDQUFBO1FBRUEsRUFBQSxDQUFBLENBQUEsS0FBQSxDQUFBLE9BQUEsQ0FBQSxHQUFBLENBQUEsSUFBQSxDQUFBLENBQUEsQ0FBQSxDQUFBO1lBQ0EsMEJBQUEsRUFBQSxhQUFBLEVBQUEsYUFBQSxDQUFBO1FBQ0EsQ0FBQTs7SUFDQSxDQUFBO0lBRUEscUJBQUEsR0FBQSxVQUFBLEdBQUEsRUFBQSxHQUFBO1FBQ0EsRUFBQSxDQUFBLENBQUEsT0FBQSxHQUFBLElBQUEsUUFBQSxDQUFBLENBQUEsQ0FBQTtZQUNBLElBQUEsQ0FBQSxLQUFBLEdBQUEsQ0FBQSxDQUFBLE1BQUEsQ0FBQSxJQUFBLENBQUEsS0FBQSxFQUFBLEdBQUEsQ0FBQSxDQUFBO1FBQ0EsQ0FBQTtRQUFBLElBQUEsQ0FBQSxDQUFBO1lBQ0EsSUFBQSxDQUFBLEtBQUEsQ0FBQSxHQUFBLENBQUEsR0FBQSxHQUFBLENBQUE7UUFDQSxDQUFBO1FBQ0EsTUFBQSxDQUFBLElBQUEsQ0FBQTtJQUNBLENBQUE7SUFFQSx1QkFBQSxHQUFBO1FBQ0EsSUFBQSxDQUFBLEtBQUEsR0FBQSxFQUFBLENBQUE7UUFDQSxNQUFBLENBQUEsSUFBQSxDQUFBO0lBQ0EsQ0FBQTtJQUVBLGlCQUFBLEdBQUEsVUFBQSxPQUFBLEVBQUEsUUFBQTtRQUNBLENBQUEsQ0FBQSxHQUFBLENBQUEsSUFBQSxDQUFBLFFBQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxRQUFBLENBQUEsQ0FBQTtJQUNBLENBQUE7SUFFQSxxQkFBQSxHQUFBLFVBQUEsT0FBQTtRQUNBLENBQUEsQ0FBQSxPQUFBLENBQUEsSUFBQSxDQUFBLFFBQUEsRUFBQSxFQUFBLE9BQUEsQ0FBQSxDQUFBO0lBQ0EsQ0FBQTtJQUVBLGtCQUFBLEdBQUEsVUFBQSxJQUFBLEVBQUEsT0FBQSxFQUFBLFFBQUE7UUFDQSxDQUFBLENBQUEsSUFBQSxDQUFBLElBQUEsQ0FBQSxRQUFBLEVBQUEsRUFBQSxJQUFBLEVBQUEsT0FBQSxFQUFBLFFBQUEsQ0FBQSxDQUFBO0lBQ0EsQ0FBQTtJQUVBLFNBQUEsR0FBQSxVQUFBLEdBQUE7UUFDQSxFQUFBLENBQUEsQ0FBQSxPQUFBLEdBQUEsSUFBQSxRQUFBLENBQUEsQ0FBQSxDQUFBO1lBQ0EsTUFBQSxDQUFBLEdBQUEsQ0FBQTtRQUNBLENBQUE7UUFDQSxNQUFBLENBQUEsSUFBQSxHQUFBLENBQUEsR0FBQSxDQUFBLENBQUE7SUFDQSxDQUFBO0lBRUEsc0JBQUEsR0FBQTtRQUNBLElBQUEsS0FBQSxHQUFBLEdBQUEsQ0FBQSxPQUFBLENBQUEsSUFBQSxDQUFBLEtBQUEsQ0FBQSxDQUFBO1FBQ0EsRUFBQSxDQUFBLENBQUEsS0FBQSxJQUFBLEVBQUEsQ0FBQSxDQUFBLENBQUE7WUFDQSxNQUFBLENBQUEsSUFBQSxDQUFBLEtBQUEsQ0FBQTtRQUNBLENBQUE7UUFDQSxNQUFBLENBQUEsSUFBQSxDQUFBLEtBQUEsR0FBQSxHQUFBLEdBQUEsS0FBQSxDQUFBO0lBQ0EsQ0FBQTtJQUVBLFdBQUEsR0FBQSxVQUFBLElBQUE7UUFDQSxFQUFBLENBQUEsQ0FBQSxRQUFBLElBQUEsT0FBQSxJQUFBLENBQUEsQ0FBQSxDQUFBO1lBQ0EsTUFBQSxDQUFBLElBQUEsQ0FBQTtRQUNBLENBQUE7UUFDQSxJQUFBLEtBQUEsR0FBQSxFQUFBLENBQUE7UUFDQSxDQUFBLENBQUEsSUFBQSxDQUFBLElBQUEsRUFBQSxVQUFBLEdBQUEsRUFBQSxJQUFBO1lBQ0EsS0FBQSxJQUFBLEdBQUEsQ0FBQSxZQUFBLENBQUEsSUFBQSxFQUFBLEdBQUEsQ0FBQSxDQUFBO1FBQ0EsQ0FBQSxDQUFBLENBQUE7UUFDQSxNQUFBLENBQUEsS0FBQSxDQUFBLFNBQUEsQ0FBQSxDQUFBLEVBQUEsS0FBQSxDQUFBLE1BQUEsR0FBQSxDQUFBLENBQUEsQ0FBQTtJQUNBLENBQUE7SUFFQSxnQkFBQSxHQUFBLFVBQUEsSUFBQSxFQUFBLEdBQUE7UUFDQSxFQUFBLENBQUEsQ0FBQSxPQUFBLElBQUEsSUFBQSxRQUFBLENBQUEsQ0FBQSxDQUFBO1lBQ0EsTUFBQSxDQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsSUFBQSxHQUFBLEdBQUEsQ0FBQTtRQUNBLENBQUE7UUFDQSxJQUFBLEtBQUEsR0FBQSxFQUFBLENBQUE7UUFDQSxJQUFBLE9BQUEsR0FBQSxJQUFBLFlBQUEsS0FBQSxDQUFBO1FBQ0EsQ0FBQSxDQUFBLElBQUEsQ0FBQSxJQUFBLEVBQUEsVUFBQSxHQUFBLEVBQUEsSUFBQTtZQUNBLEtBQUEsSUFBQSxHQUFBLENBQUEsWUFBQSxDQUFBLElBQUEsRUFBQSxHQUFBLEdBQUEsQ0FBQSxPQUFBLEdBQUEsSUFBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxDQUFBLENBQUEsQ0FBQTtRQUNBLENBQUEsQ0FBQSxDQUFBO1FBQ0EsTUFBQSxDQUFBLEtBQUEsQ0FBQTtJQUNBLENBQUE7SUFFQSx1QkFBQSxHQUFBLFVBQUEsR0FBQTtRQUNBLElBQUEsc0JBQUEsRUFBQSxZQUFBLEVBQUEsYUFBQSxDQUFBO1FBQ0EsRUFBQSxDQUFBLENBQUEsQ0FBQSxLQUFBLENBQUEsQ0FBQSxDQUFBO1lBQ0EsTUFBQSxDQUFBLENBQUEsSUFBQSxFQUFBLEVBQUEsQ0FBQSxDQUFBO1FBQ0EsQ0FBQTtRQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFDQSxHQUFBLEdBQUEsS0FBQSxDQUFBLEtBQUEsQ0FBQSxHQUFBLENBQUEsRUFDQSxHQUFBLEdBQUEsR0FBQSxDQUFBLE1BQUEsRUFBQSxDQUFBLEdBQUEsQ0FBQSxFQUFBLENBQUEsQ0FBQSxDQUFBLFNBQUE7UUFDQSxHQUFBLENBQUEsQ0FBQSxFQUFBLENBQUEsR0FBQSxHQUFBLEVBQUEsQ0FBQSxFQUFBLEVBQUEsQ0FBQTtZQUNBLEVBQUEsQ0FBQSxDQUFBLENBQUEsR0FBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQTtnQkFDQSxRQUFBLENBQUE7WUFDQSxDQUFBO1lBQ0EsQ0FBQSxHQUFBLEdBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxLQUFBLENBQUEsR0FBQSxDQUFBLENBQUE7WUFDQSxHQUFBLENBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLEdBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxDQUFBO1FBQ0EsQ0FBQTtRQUNBLE1BQUEsQ0FBQSxDQUFBLElBQUEsRUFBQSxHQUFBLENBQUEsQ0FBQTtJQUNBLENBQUE7SUFDQSxVQUFBO0FBQUEsQ0EzRkEsQUEyRkEsSUFBQTtBQzNGQTs7R0FFQTtBQUNBO0lBQUEsd0JBQUE7SUFDQSxjQUNBLE9BQUEsRUFDQSxNQUFBO1FBRkEsWUFJQSxpQkFBQSxTQU9BO1FBVkEsYUFBQSxHQUFBLE9BQUEsQ0FBQTtRQUlBLEtBQUEsQ0FBQSxPQUFBLEdBQUEsQ0FBQSxDQUFBLE1BQUEsQ0FBQSxFQUFBLEVBQUEsSUFBQSxpQkFBQSxFQUFBLEVBQUEsTUFBQSxDQUFBLENBQUE7UUFDQSxLQUFBLENBQUEsT0FBQSxDQUFBLEdBQUEsR0FBQSxHQUFBLENBQUEsS0FBQSxDQUFBLEtBQUEsQ0FBQSxPQUFBLENBQUEsR0FBQSxDQUFBLENBQUE7UUFDQSxLQUFBLENBQUEsT0FBQSxDQUFBLFNBQUEsR0FBQSxHQUFBLENBQUEsS0FBQSxDQUFBLEtBQUEsQ0FBQSxPQUFBLENBQUEsU0FBQSxDQUFBLENBQUE7UUFDQSxLQUFBLENBQUEsT0FBQSxDQUFBLFNBQUEsR0FBQSxHQUFBLENBQUEsS0FBQSxDQUFBLEtBQUEsQ0FBQSxPQUFBLENBQUEsU0FBQSxDQUFBLENBQUE7UUFDQSxLQUFBLENBQUEsSUFBQSxFQUFBLENBQUE7UUFDQSxLQUFBLENBQUEsTUFBQSxFQUFBLENBQUE7O0lBQ0EsQ0FBQTtJQVlBLG1CQUFBLEdBQUE7UUFDQSxJQUFBLFFBQUEsR0FBQSxJQUFBLENBQUE7UUFDQSxJQUFBLENBQUEsS0FBQSxHQUFBLElBQUEsQ0FBQSxPQUFBLENBQUEsSUFBQSxDQUFBLElBQUEsQ0FBQSxPQUFBLENBQUEsUUFBQSxDQUFBLENBQUE7UUFDQSxJQUFBLENBQUEsV0FBQSxHQUFBLElBQUEsQ0FBQSxPQUFBLENBQUEsSUFBQSxDQUFBLElBQUEsQ0FBQSxPQUFBLENBQUEsVUFBQSxDQUFBLENBQUE7UUFDQSxJQUFBLENBQUEsTUFBQSxHQUFBLENBQUEsQ0FBQSx5QkFBQSxDQUFBLENBQUEsS0FBQSxDQUFBO1lBQ0EsUUFBQSxFQUFBLFVBQUEsSUFBQTtnQkFDQSxRQUFBLENBQUEsTUFBQSxDQUFBLE1BQUEsRUFBQSxJQUFBLENBQUEsQ0FBQTtZQUNBLENBQUE7U0FDQSxDQUFBLENBQUE7UUFDQSxJQUFBLENBQUEsU0FBQSxHQUFBLElBQUEsQ0FBQSxPQUFBLENBQUEsSUFBQSxDQUFBLFdBQUEsQ0FBQSxDQUFBO1FBQ0EsSUFBQSxDQUFBLE9BQUEsQ0FBQSxNQUFBLENBQUEsSUFBQSxDQUFBLE1BQUEsQ0FBQSxPQUFBLENBQUEsQ0FBQTtRQUNBLElBQUEsQ0FBQSxVQUFBLEVBQUEsQ0FBQTtJQUNBLENBQUE7SUFFQSx1QkFBQSxHQUFBO1FBQ0EsSUFBQSxDQUFBLEtBQUEsQ0FBQSxJQUFBLENBQUEsV0FBQSxDQUFBLENBQUEsUUFBQSxDQUFBLFNBQUEsQ0FBQSxDQUFBO0lBQ0EsQ0FBQTtJQUVBLDRCQUFBLEdBQUE7UUFDQSxJQUFBLElBQUEsR0FBQSxFQUFBLENBQUE7UUFDQSxJQUFBLFFBQUEsR0FBQSxJQUFBLENBQUE7UUFDQSxJQUFBLENBQUEsS0FBQSxDQUFBLElBQUEsQ0FBQSxtQkFBQSxDQUFBLENBQUEsSUFBQSxDQUFBLFVBQUEsQ0FBQSxFQUFBLEVBQUE7WUFDQSxJQUFBLENBQUEsSUFBQSxDQUFBLENBQUEsQ0FBQSxFQUFBLENBQUEsQ0FBQSxPQUFBLENBQUEsUUFBQSxDQUFBLE9BQUEsQ0FBQSxHQUFBLENBQUEsQ0FBQSxDQUFBO1FBQ0EsQ0FBQSxDQUFBLENBQUE7UUFDQSxNQUFBLENBQUEsSUFBQSxDQUFBO0lBQ0EsQ0FBQTtJQUdBLHlCQUFBLEdBQUE7UUFDQSxJQUFBLElBQUEsR0FBQSxFQUFBLENBQUE7UUFDQSxJQUFBLFFBQUEsR0FBQSxJQUFBLENBQUE7UUFDQSxDQUFBLENBQUEsSUFBQSxDQUFBLElBQUEsQ0FBQSxhQUFBLEVBQUEsRUFBQSxVQUFBLENBQUEsRUFBQSxJQUFBO1lBQ0EsSUFBQSxDQUFBLElBQUEsQ0FBQSxJQUFBLENBQUEsSUFBQSxDQUFBLFFBQUEsQ0FBQSxPQUFBLENBQUEsS0FBQSxDQUFBLENBQUEsQ0FBQTtRQUNBLENBQUEsQ0FBQSxDQUFBO1FBQ0EsTUFBQSxDQUFBLElBQUEsQ0FBQTtJQUNBLENBQUE7SUFFQTs7OztPQUlBO0lBQ0EsbUJBQUEsR0FBQSxVQUFBLElBQUEsRUFBQSxLQUFBO1FBQ0EsSUFBQSxDQUFBLE1BQUEsQ0FBQTtZQUNBLElBQUEsRUFBQSxJQUFBO1lBQ0EsS0FBQSxFQUFBLEtBQUE7U0FDQSxDQUFBLENBQUE7SUFDQSxDQUFBO0lBRUE7Ozs7T0FJQTtJQUNBLHFCQUFBLEdBQUEsVUFBQSxJQUFBLEVBQUEsR0FBQTtRQUFBLHFCQUFBLEVBQUEsU0FBQTtRQUNBLEVBQUEsQ0FBQSxDQUFBLE9BQUEsSUFBQSxJQUFBLFFBQUEsQ0FBQSxDQUFBLENBQUE7WUFDQSxJQUFBLGFBQUEsR0FBQSxJQUFBLElBQUEsR0FBQSxLQUFBLENBQUE7UUFDQSxDQUFBO1FBQ0EsRUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQUEsY0FBQSxDQUFBLE1BQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQTtZQUNBLElBQUEsQ0FBQSxNQUFBLENBQUEsR0FBQSxDQUFBLENBQUE7UUFDQSxDQUFBO1FBQ0EsSUFBQSxDQUFBLE9BQUEsQ0FBQSxHQUFBLENBQUEsT0FBQSxDQUFBLElBQUEsQ0FBQSxDQUFBO1FBQ0EsSUFBQSxDQUFBLE9BQUEsRUFBQSxDQUFBOztJQUNBLENBQUE7SUFFQTs7T0FFQTtJQUNBLDRCQUFBLEdBQUE7UUFDQSxJQUFBLFFBQUEsR0FBQSxJQUFBLENBQUEsYUFBQSxFQUFBLENBQUE7UUFDQSxJQUFBLFFBQUEsR0FBQSxJQUFBLENBQUE7UUFDQSxJQUFBLElBQUEsR0FBQSxFQUFBLENBQUE7UUFDQSxRQUFBLENBQUEsT0FBQSxDQUFBLFVBQUEsSUFBQTtZQUNBLElBQUEsQ0FBQSxJQUFBLENBQUEsSUFBQSxDQUFBLElBQUEsQ0FBQSxRQUFBLENBQUEsT0FBQSxDQUFBLEtBQUEsQ0FBQSxDQUFBLENBQUE7UUFDQSxDQUFBLENBQUEsQ0FBQTtRQUNBLElBQUEsQ0FBQSxRQUFBLE9BQUEsSUFBQSxFQUFBLElBQUEsRUFBQTtJQUNBLENBQUE7SUFFQSx3QkFBQSxHQUFBLFVBQUEsT0FBQTtRQUNBLElBQUEsRUFBQSxHQUFBLE9BQUEsQ0FBQSxJQUFBLENBQUEsSUFBQSxDQUFBLE9BQUEsQ0FBQSxLQUFBLENBQUEsQ0FBQTtRQUNBLEVBQUEsQ0FBQSxDQUFBLENBQUEsRUFBQSxDQUFBLENBQUEsQ0FBQTtZQUNBLE1BQUEsQ0FBQTtRQUNBLENBQUE7UUFDQSxJQUFBLENBQUEsUUFBQSxDQUFBLEVBQUEsQ0FBQSxDQUFBO0lBQ0EsQ0FBQTtJQUNBOztPQUVBO0lBQ0Esd0JBQUEsR0FBQTtRQUNBLE1BQUEsQ0FBQSxJQUFBLENBQUEsT0FBQSxDQUFBLEtBQUEsQ0FBQSxPQUFBLENBQUEsT0FBQSxFQUFBLEVBQUEsQ0FBQSxDQUFBO0lBQ0EsQ0FBQTtJQUVBLHVCQUFBLEdBQUE7UUFBQSxjQUFBO2FBQUEsVUFBQSxFQUFBLHFCQUFBLEVBQUEsSUFBQTtZQUFBLHlCQUFBOztRQUNBLEVBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBQSxNQUFBLElBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQTtZQUNBLE1BQUEsQ0FBQTtRQUNBLENBQUE7UUFDQSxJQUFBLFFBQUEsR0FBQSxJQUFBLENBQUE7UUFDQSxFQUFBLENBQUEsQ0FBQSxLQUFBLElBQUEsSUFBQSxDQUFBLE9BQUEsT0FBQSxJQUFBLEdBQUEsUUFBQSxTQUFBLElBQUEsRUFBQSxDQUFBLENBQUEsQ0FBQTtZQUNBLE9BQUEsQ0FBQSxHQUFBLENBQUEsaUJBQUEsQ0FBQSxDQUFBO1lBQ0EsTUFBQSxDQUFBO1FBQ0EsQ0FBQTtRQUNBLElBQUEsQ0FBQSxPQUFBLENBQUEsU0FBQSxDQUFBLE9BQUEsQ0FBQSxJQUFBLENBQUEsU0FBQSxFQUFBLEVBQUEsSUFBQSxDQUFBLENBQUEsSUFBQSxDQUFBLEVBQUEsRUFBQSxVQUFBLElBQUE7WUFDQSxFQUFBLENBQUEsQ0FBQSxJQUFBLENBQUEsSUFBQSxJQUFBLEdBQUEsQ0FBQSxDQUFBLENBQUE7Z0JBQ0EsUUFBQSxDQUFBLE9BQUEsRUFBQSxDQUFBO1lBQ0EsQ0FBQTtRQUNBLENBQUEsRUFBQSxNQUFBLENBQUEsQ0FBQTtJQUNBLENBQUE7SUFFQSxzQkFBQSxHQUFBO1FBQ0EsSUFBQSxRQUFBLEdBQUEsSUFBQSxDQUFBO1FBQ0EsRUFBQSxDQUFBLENBQUEsSUFBQSxDQUFBLE9BQUEsQ0FBQSxXQUFBO2VBQ0EsSUFBQSxDQUFBLE9BQUEsQ0FBQSxXQUFBLENBQUEsSUFBQSxDQUFBLElBQUEsQ0FBQSxJQUFBLEtBQUEsQ0FBQSxDQUFBLENBQUE7WUFDQSxPQUFBLENBQUEsR0FBQSxDQUFBLGdCQUFBLENBQUEsQ0FBQTtZQUNBLE1BQUEsQ0FBQTtRQUNBLENBQUE7UUFDQSxJQUFBLENBQUEsT0FBQSxDQUFBLEdBQUEsQ0FBQSxPQUFBLENBQUEsVUFBQSxJQUFBO1lBQ0EsRUFBQSxDQUFBLENBQUEsUUFBQSxDQUFBLE9BQUEsQ0FBQSxVQUFBLENBQUEsQ0FBQSxDQUFBO2dCQUNBLFFBQUEsQ0FBQSxPQUFBLENBQUEsVUFBQSxDQUFBLElBQUEsQ0FBQSxJQUFBLEVBQUEsSUFBQSxDQUFBLENBQUE7WUFDQSxDQUFBO1lBQ0EsRUFBQSxDQUFBLENBQUEsSUFBQSxDQUFBLElBQUEsSUFBQSxHQUFBLENBQUEsQ0FBQSxDQUFBO2dCQUNBLE9BQUEsQ0FBQSxHQUFBLENBQUEsSUFBQSxDQUFBLENBQUE7Z0JBQ0EsTUFBQSxDQUFBO1lBQ0EsQ0FBQTtZQUNBLFFBQUEsQ0FBQSxXQUFBLENBQUEsSUFBQSxDQUFBLElBQUEsQ0FBQSxRQUFBLENBQUEsQ0FBQTtZQUNBLFFBQUEsQ0FBQSxNQUFBLENBQUEsTUFBQSxDQUFBLElBQUEsQ0FBQSxJQUFBLENBQUEsSUFBQSxFQUFBLElBQUEsQ0FBQSxJQUFBLENBQUEsSUFBQSxDQUFBLElBQUEsQ0FBQSxLQUFBLEdBQUEsSUFBQSxDQUFBLElBQUEsQ0FBQSxRQUFBLENBQUEsQ0FBQSxDQUFBO1FBQ0EsQ0FBQSxDQUFBLENBQUE7SUFDQSxDQUFBO0lBRUE7OztPQUdBO0lBQ0EsMEJBQUEsR0FBQSxVQUFBLEdBQUE7UUFDQSxNQUFBLENBQUEsQ0FBQSxHQUFBLElBQUEsR0FBQSxJQUFBLEVBQUEsSUFBQSxHQUFBLENBQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxDQUFBO0lBQ0EsQ0FBQTtJQUVBLDJCQUFBLEdBQUEsVUFBQSxPQUFBO1FBQ0EsSUFBQSxJQUFBLEdBQUEsT0FBQSxDQUFBLElBQUEsQ0FBQSxXQUFBLENBQUEsQ0FBQTtRQUNBLEVBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBQSxXQUFBLENBQUEsSUFBQSxDQUFBLENBQUEsQ0FBQSxDQUFBO1lBQ0EsTUFBQSxDQUFBO1FBQ0EsQ0FBQTtRQUNBLElBQUEsRUFBQSxHQUFBLE9BQUEsQ0FBQSxPQUFBLENBQUEsSUFBQSxDQUFBLE9BQUEsQ0FBQSxHQUFBLENBQUEsQ0FBQSxJQUFBLENBQUEsSUFBQSxDQUFBLE9BQUEsQ0FBQSxLQUFBLENBQUEsQ0FBQTtRQUNBLEVBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBQSxXQUFBLENBQUEsRUFBQSxDQUFBLENBQUEsQ0FBQSxDQUFBO1lBQ0EsTUFBQSxDQUFBO1FBQ0EsQ0FBQTtRQUNBLEVBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBQSxPQUFBLENBQUEsWUFBQTtlQUNBLEtBQUEsSUFBQSxJQUFBLENBQUEsT0FBQSxDQUFBLFlBQUEsQ0FBQSxJQUFBLENBQUEsSUFBQSxFQUFBLE9BQUEsRUFBQSxFQUFBLENBQUEsQ0FBQSxDQUFBLENBQUE7WUFDQSxNQUFBLENBQUE7UUFDQSxDQUFBO1FBQ0EsSUFBQSxRQUFBLEdBQUEsSUFBQSxDQUFBO1FBQ0EsSUFBQSxLQUFBLEdBQUEsQ0FBQSxDQUFBLHFCQUFBLENBQUEsQ0FBQTtRQUNBLEtBQUEsQ0FBQSxHQUFBLENBQUEsT0FBQSxDQUFBLElBQUEsRUFBQSxDQUFBLENBQUE7UUFDQSxLQUFBLENBQUEsSUFBQSxDQUFBO1lBQ0EsSUFBQSxHQUFBLEdBQUEsS0FBQSxDQUFBLEdBQUEsRUFBQSxDQUFBO1lBQ0EsS0FBQSxDQUFBLE1BQUEsRUFBQSxDQUFBO1lBQ0EsT0FBQSxDQUFBLElBQUEsQ0FBQSxHQUFBLENBQUEsQ0FBQTtZQUNBLFFBQUEsQ0FBQSxVQUFBLENBQUEsRUFBQSxFQUFBLElBQUEsRUFBQSxHQUFBLENBQUEsQ0FBQTtRQUNBLENBQUEsQ0FBQSxDQUFBO1FBQ0EsT0FBQSxDQUFBLElBQUEsQ0FBQSxFQUFBLENBQUEsQ0FBQSxNQUFBLENBQUEsS0FBQSxDQUFBLENBQUE7UUFDQSxLQUFBLENBQUEsS0FBQSxFQUFBLENBQUE7SUFDQSxDQUFBO0lBRUEseUJBQUEsR0FBQSxVQUFBLEVBQUEsRUFBQSxJQUFBLEVBQUEsR0FBQTtRQUNBLEVBQUEsQ0FBQSxDQUFBLEtBQUEsSUFBQSxJQUFBLENBQUEsT0FBQSxDQUFBLFFBQUEsRUFBQSxFQUFBLEVBQUEsSUFBQSxFQUFBLEdBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQTtZQUNBLE9BQUEsQ0FBQSxHQUFBLENBQUEsaUJBQUEsQ0FBQSxDQUFBO1lBQ0EsTUFBQSxDQUFBO1FBQ0EsQ0FBQTtRQUNBLElBQUEsQ0FBQSxPQUFBLENBQUEsU0FBQSxDQUFBLElBQUE7WUFDQSxHQUFBLElBQUEsQ0FBQSxTQUFBLEVBQUEsSUFBQSxFQUFBO1lBQ0EsT0FBQSxHQUFBLElBQUE7WUFDQSxRQUFBLEdBQUEsR0FBQTtpQkFDQSxVQUFBLElBQUE7UUFFQSxDQUFBLEVBQUEsTUFBQSxDQUFBLENBQUE7O0lBQ0EsQ0FBQTtJQUVBLHlCQUFBLEdBQUE7UUFDQSxJQUFBLFFBQUEsR0FBQSxJQUFBLENBQUE7UUFDQSxJQUFBLENBQUEsV0FBQSxDQUFBLE1BQUEsQ0FBQTtZQUNBLE9BQUEsQ0FBQSxHQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBQSxDQUFBLGNBQUEsRUFBQSxDQUFBLENBQUE7WUFDQSxRQUFBLENBQUEsTUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQUEsQ0FBQSxjQUFBLEVBQUEsQ0FBQSxDQUFBO1lBQ0EsTUFBQSxDQUFBLEtBQUEsQ0FBQTtRQUNBLENBQUEsQ0FBQSxDQUFBO1FBQ0EsSUFBQSxDQUFBLE9BQUEsQ0FBQSxJQUFBLENBQUEsSUFBQSxDQUFBLE9BQUEsQ0FBQSxPQUFBLEdBQUEsSUFBQSxDQUFBLENBQUEsS0FBQSxDQUFBO1lBQ0EsSUFBQSxLQUFBLEdBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBQSxDQUFBO1lBQ0EsSUFBQSxJQUFBLEdBQUEsS0FBQSxDQUFBLElBQUEsQ0FBQSxXQUFBLENBQUEsQ0FBQTtZQUNBLEVBQUEsQ0FBQSxDQUFBLFFBQUEsQ0FBQSxXQUFBLENBQUEsSUFBQSxDQUFBLENBQUEsQ0FBQSxDQUFBO2dCQUNBLE1BQUEsQ0FBQTtZQUNBLENBQUE7WUFDQSxFQUFBLENBQUEsQ0FBQSxLQUFBLENBQUEsUUFBQSxDQUFBLFVBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQTtnQkFDQSxLQUFBLENBQUEsV0FBQSxFQUFBLENBQUEsUUFBQSxDQUFBLFdBQUEsQ0FBQSxDQUFBO2dCQUNBLFFBQUEsQ0FBQSxJQUFBLENBQUEsSUFBQSxFQUFBLE1BQUEsQ0FBQSxDQUFBO1lBQ0EsQ0FBQTtZQUFBLElBQUEsQ0FBQSxDQUFBO2dCQUNBLEtBQUEsQ0FBQSxXQUFBLEVBQUEsQ0FBQSxRQUFBLENBQUEsVUFBQSxDQUFBLENBQUE7Z0JBQ0EsUUFBQSxDQUFBLElBQUEsQ0FBQSxJQUFBLEVBQUEsS0FBQSxDQUFBLENBQUE7WUFDQSxDQUFBO1FBQ0EsQ0FBQSxDQUFBLENBQUE7UUFDQSxJQUFBLENBQUEsU0FBQSxDQUFBLEtBQUEsQ0FBQTtZQUNBLElBQUEsS0FBQSxHQUFBLENBQUEsQ0FBQSxJQUFBLENBQUEsQ0FBQTtZQUNBLEVBQUEsQ0FBQSxDQUFBLEtBQUEsQ0FBQSxRQUFBLENBQUEsU0FBQSxDQUFBLENBQUEsQ0FBQSxDQUFBO2dCQUNBLEtBQUEsQ0FBQSxXQUFBLENBQUEsU0FBQSxDQUFBLENBQUE7Z0JBQ0EsTUFBQSxDQUFBO1lBQ0EsQ0FBQTtZQUNBLFFBQUEsQ0FBQSxTQUFBLENBQUEsUUFBQSxDQUFBLFNBQUEsQ0FBQSxDQUFBO1lBQ0EsUUFBQSxDQUFBLEtBQUEsQ0FBQSxJQUFBLENBQUEsV0FBQSxDQUFBLENBQUEsUUFBQSxDQUFBLFNBQUEsQ0FBQSxDQUFBO1FBQ0EsQ0FBQSxDQUFBLENBQUE7UUFDQSxJQUFBLENBQUEsT0FBQSxDQUFBLElBQUEsQ0FBQSxZQUFBLENBQUEsQ0FBQSxLQUFBLENBQUE7WUFDQSxJQUFBLEtBQUEsR0FBQSxDQUFBLENBQUEsSUFBQSxDQUFBLENBQUE7WUFDQSxJQUFBLEdBQUEsR0FBQSxLQUFBLENBQUEsSUFBQSxDQUFBLFVBQUEsQ0FBQSxJQUFBLFFBQUEsQ0FBQSxPQUFBLENBQUEsU0FBQSxDQUFBO1lBQ0EsRUFBQSxDQUFBLENBQUEsT0FBQSxDQUFBLEdBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQTtnQkFDQSxRQUFBLENBQUEsYUFBQSxFQUFBLENBQUE7WUFDQSxDQUFBO1FBQ0EsQ0FBQSxDQUFBLENBQUE7UUFDQSxJQUFBLENBQUEsT0FBQSxDQUFBLElBQUEsQ0FBQSxJQUFBLENBQUEsT0FBQSxDQUFBLFNBQUEsR0FBQSxRQUFBLENBQUEsQ0FBQSxJQUFBLENBQUE7WUFDQSxRQUFBLENBQUEsY0FBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQUEsQ0FBQSxDQUFBO1FBQ0EsQ0FBQSxDQUFBLENBQUE7UUFDQSxJQUFBLENBQUEsT0FBQSxDQUFBLElBQUEsQ0FBQSxJQUFBLENBQUEsT0FBQSxDQUFBLFNBQUEsR0FBQSxTQUFBLENBQUEsQ0FBQSxNQUFBLENBQUE7WUFDQSxRQUFBLENBQUEsY0FBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQUEsQ0FBQSxDQUFBO1FBQ0EsQ0FBQSxDQUFBLENBQUE7UUFDQSxJQUFBLENBQUEsS0FBQSxDQUFBLEVBQUEsQ0FBQSxPQUFBLEVBQUEsU0FBQSxFQUFBO1lBQ0EsSUFBQSxLQUFBLEdBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBQSxDQUFBO1lBQ0EsSUFBQSxHQUFBLEdBQUEsS0FBQSxDQUFBLElBQUEsQ0FBQSxVQUFBLENBQUEsSUFBQSxRQUFBLENBQUEsT0FBQSxDQUFBLFNBQUEsQ0FBQTtZQUNBLEVBQUEsQ0FBQSxDQUFBLE9BQUEsQ0FBQSxHQUFBLENBQUEsQ0FBQSxDQUFBLENBQUE7Z0JBQ0EsUUFBQSxDQUFBLFNBQUEsQ0FBQSxLQUFBLENBQUEsT0FBQSxDQUFBLFFBQUEsQ0FBQSxPQUFBLENBQUEsR0FBQSxDQUFBLENBQUEsQ0FBQTtZQUNBLENBQUE7UUFDQSxDQUFBLENBQUEsQ0FBQTtRQUNBLElBQUEsQ0FBQSxLQUFBLENBQUEsRUFBQSxDQUFBLE9BQUEsRUFBQSxXQUFBLEVBQUE7WUFDQSxJQUFBLEtBQUEsR0FBQSxDQUFBLENBQUEsSUFBQSxDQUFBLENBQUE7WUFDQSxFQUFBLENBQUEsQ0FBQSxLQUFBLENBQUEsUUFBQSxDQUFBLFNBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQTtnQkFDQSxLQUFBLENBQUEsV0FBQSxDQUFBLFNBQUEsQ0FBQSxDQUFBO2dCQUNBLFFBQUEsQ0FBQSxTQUFBLENBQUEsV0FBQSxDQUFBLFNBQUEsQ0FBQSxDQUFBO2dCQUNBLE1BQUEsQ0FBQTtZQUNBLENBQUE7WUFDQSxLQUFBLENBQUEsUUFBQSxDQUFBLFNBQUEsQ0FBQSxDQUFBO1FBQ0EsQ0FBQSxDQUFBLENBQUE7UUFDQSxJQUFBLENBQUEsS0FBQSxDQUFBLEVBQUEsQ0FBQSxPQUFBLEVBQUEsSUFBQSxDQUFBLE9BQUEsQ0FBQSxNQUFBLEVBQUE7WUFDQSxRQUFBLENBQUEsWUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQUEsQ0FBQSxDQUFBO1FBQ0EsQ0FBQSxDQUFBLENBQUE7SUFDQSxDQUFBO0lBRUEsNkJBQUEsR0FBQSxVQUFBLE9BQUE7UUFDQSxJQUFBLElBQUEsR0FBQSxPQUFBLENBQUEsSUFBQSxDQUFBLE1BQUEsQ0FBQSxDQUFBO1FBQ0EsRUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQUEsQ0FBQSxDQUFBO1lBQ0EsTUFBQSxDQUFBO1FBQ0EsQ0FBQTtRQUNBLElBQUEsQ0FBQSxNQUFBLENBQUEsSUFBQSxFQUFBLE9BQUEsQ0FBQSxHQUFBLEVBQUEsQ0FBQSxDQUFBO0lBQ0EsQ0FBQTtJQUVBLDBCQUFBLEdBQUEsVUFBQSxJQUFBO1FBQ0EsSUFBQSxJQUFBLEdBQUEsRUFBQSxDQUFBO1FBQ0EsRUFBQSxDQUFBLENBQUEsT0FBQSxJQUFBLElBQUEsUUFBQSxDQUFBLENBQUEsQ0FBQTtZQUNBLElBQUEsVUFBQSxHQUFBLElBQUEsQ0FBQTtZQUNBLENBQUEsQ0FBQSxJQUFBLENBQUEsSUFBQSxFQUFBLFVBQUEsQ0FBQSxFQUFBLElBQUE7Z0JBQ0EsSUFBQSxJQUFBLFVBQUEsQ0FBQSxPQUFBLENBQUEsU0FBQSxDQUFBLElBQUEsQ0FBQSxDQUFBO1lBQ0EsQ0FBQSxDQUFBLENBQUE7UUFDQSxDQUFBO1FBQUEsSUFBQSxDQUFBLENBQUE7WUFDQSxJQUFBLEdBQUEsSUFBQSxDQUFBO1FBQ0EsQ0FBQTtRQUNBLElBQUEsQ0FBQSxLQUFBLENBQUEsSUFBQSxDQUFBLElBQUEsQ0FBQSxDQUFBO0lBQ0EsQ0FBQTtJQUVBLHFCQUFBLEdBQUEsVUFBQSxRQUFBO1FBQ0EsTUFBQSxDQUFBLElBQUEsQ0FBQSxFQUFBLENBQUEsUUFBQSxFQUFBLFFBQUEsQ0FBQSxDQUFBO0lBQ0EsQ0FBQTtJQUVBLHFCQUFBLEdBQUEsVUFBQSxRQUFBO1FBQ0EsTUFBQSxDQUFBLElBQUEsQ0FBQSxFQUFBLENBQUEsUUFBQSxFQUFBLFFBQUEsQ0FBQSxDQUFBO0lBQ0EsQ0FBQTtJQUNBLFdBQUE7QUFBQSxDQXBTQSxBQW9TQSxDQXBTQSxHQUFBLEdBb1NBO0FBc0JBO0lBQUE7UUFDQSxRQUFBLEdBQUEsT0FBQSxDQUFBO1FBQ0EsY0FBQSxHQUFBLFFBQUEsQ0FBQTtRQUNBLGNBQUEsR0FBQSxRQUFBLENBQUE7UUFDQSxVQUFBLEdBQUEsU0FBQSxDQUFBO1FBQ0EsZUFBQSxHQUFBLGNBQUEsQ0FBQTtRQUNBLGNBQUEsR0FBQSxPQUFBLENBQUE7UUFDQSxhQUFBLEdBQUEsWUFBQSxDQUFBO1FBQ0EsY0FBQSxHQUFBLGFBQUEsQ0FBQTtRQUNBLFlBQUEsR0FBQSxXQUFBLENBQUE7UUFDQSxRQUFBLEdBQUEsSUFBQSxDQUFBO1FBQ0EsV0FBQSxHQUFBLElBQUEsQ0FBQTtJQUNBLENBQUE7SUFBQSx3QkFBQTtBQUFBLENBWkEsQUFZQSxJQUFBO0FBR0EsQ0FBQTtBQUFBLENBQUEsVUFBQSxDQUFBO0lBQ0EsQ0FBQSxDQUFBLEVBQUEsQ0FBQSxJQUFBLEdBQUEsVUFBQSxNQUFBO1FBQ0EsTUFBQSxDQUFBLElBQUEsSUFBQSxDQUFBLElBQUEsRUFBQSxNQUFBLENBQUEsQ0FBQTtJQUNBLENBQUEsQ0FBQTtBQUNBLENBQUEsQ0FBQSxDQUFBLE1BQUEsQ0FBQSxDQUFBIiwiZmlsZSI6ImpxdWVyeS5wYWdlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiYWJzdHJhY3QgY2xhc3MgRXZlIHtcclxuICAgIHB1YmxpYyBvcHRpb25zOiBhbnk7XHJcblxyXG4gICAgcHVibGljIG9uKGV2ZW50OiBzdHJpbmcsIGNhbGxiYWNrOiBGdW5jdGlvbik6IHRoaXMge1xyXG4gICAgICAgIHRoaXMub3B0aW9uc1snb24nICsgZXZlbnRdID0gY2FsbGJhY2s7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGhhc0V2ZW50KGV2ZW50OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmhhc093blByb3BlcnR5KCdvbicgKyBldmVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHRyaWdnZXIoZXZlbnQ6IHN0cmluZywgLi4uIGFyZ3M6IGFueVtdKSB7XHJcbiAgICAgICAgbGV0IHJlYWxFdmVudCA9ICdvbicgKyBldmVudDtcclxuICAgICAgICBpZiAoIXRoaXMuaGFzRXZlbnQoZXZlbnQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9uc1tyZWFsRXZlbnRdLmNhbGwodGhpcywgLi4uYXJncyk7XHJcbiAgICB9XHJcbn0iLCJhYnN0cmFjdCBjbGFzcyBCb3ggZXh0ZW5kcyBFdmUge1xyXG5cclxuICAgIHB1YmxpYyBlbGVtZW50OiBKUXVlcnk7XHJcblxyXG4gICAgcHVibGljIGJveDogSlF1ZXJ5O1xyXG5cclxuICAgIHByb3RlY3RlZCBzaG93UG9zaXRpb24oKTogdGhpcyB7XHJcbiAgICAgICAgdGhpcy5zZXRQb3NpdGlvbigpO1xyXG4gICAgICAgIHRoaXMuYm94LnNob3coKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgc2V0UG9zaXRpb24oKTogdGhpcyB7XHJcbiAgICAgICAgbGV0IG9mZnNldCA9IHRoaXMuZWxlbWVudC5vZmZzZXQoKTtcclxuICAgICAgICBsZXQgeCA9IG9mZnNldC5sZWZ0IC0gJCh3aW5kb3cpLnNjcm9sbExlZnQoKTtcclxuICAgICAgICBsZXQgeSA9IG9mZnNldC50b3AgKyB0aGlzLmVsZW1lbnQub3V0ZXJIZWlnaHQoKSAtICQod2luZG93KS5zY3JvbGxUb3AoKTtcclxuICAgICAgICB0aGlzLmJveC5jc3Moe2xlZnQ6IHggKyBcInB4XCIsIHRvcDogeSArIFwicHhcIn0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIOagueaNruWPr+iDveaYr+ebuOWvueWAvOiOt+WPlue7neWvueWAvFxyXG4gICAgICogQHBhcmFtIGFic2VydmFibGUgXHJcbiAgICAgKiBAcGFyYW0gcmVsdGl2ZSBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBnZXRSZWFsKGFic2VydmFibGU6IG51bWJlciwgcmVsdGl2ZTogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgICBpZiAocmVsdGl2ZSA+IDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlbHRpdmU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhYnNlcnZhYmxlICogcmVsdGl2ZTtcclxuICAgIH1cclxufSIsImNsYXNzIFVyaSB7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIF9wYXRoOiBzdHJpbmcgPSAnJyxcclxuICAgICAgICBwcml2YXRlIF9kYXRhOiB7W2tleTogc3RyaW5nXTogc3RyaW5nfSA9IHt9XHJcbiAgICApIHtcclxuICAgICAgICBpZiAoX3BhdGguaW5kZXhPZignPycpID49IDApIHtcclxuICAgICAgICAgICAgW19wYXRoLCBfZGF0YV0gPSB0aGlzLl9wYXJzZVVybChfcGF0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXREYXRhKGtleTogYW55LCB2YWw/OiBzdHJpbmcpOiB0aGlzIHtcclxuICAgICAgICBpZiAodHlwZW9mIGtleSA9PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICB0aGlzLl9kYXRhID0gJC5leHRlbmQodGhpcy5fZGF0YSwga2V5KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9kYXRhW2tleV0gPSB2YWw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGVhckRhdGEoKTogdGhpcyB7XHJcbiAgICAgICAgdGhpcy5fZGF0YSA9IHt9O1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQoc3VjY2Vzcz86IChkYXRhOiBhbnksIHRleHRTdGF0dXM6IHN0cmluZywganFYSFI6IEpRdWVyeVhIUikgPT4gYW55LCBkYXRhVHlwZT86IHN0cmluZykge1xyXG4gICAgICAgICQuZ2V0KHRoaXMudG9TdHJpbmcoKSwgc3VjY2VzcywgZGF0YVR5cGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRKc29uKHN1Y2Nlc3M/OiAoZGF0YTogYW55LCB0ZXh0U3RhdHVzOiBzdHJpbmcsIGpxWEhSOiBKUXVlcnlYSFIpID0+IGFueSkge1xyXG4gICAgICAgICQuZ2V0SlNPTih0aGlzLnRvU3RyaW5nKCksIHN1Y2Nlc3MpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBwb3N0KGRhdGE/OiBPYmplY3R8c3RyaW5nLCBzdWNjZXNzPzogKGRhdGE6IGFueSwgdGV4dFN0YXR1czogc3RyaW5nLCBqcVhIUjogSlF1ZXJ5WEhSKSA9PiBhbnksIGRhdGFUeXBlPzogc3RyaW5nKSB7XHJcbiAgICAgICAgJC5wb3N0KHRoaXMudG9TdHJpbmcoKSwgZGF0YSwgc3VjY2VzcywgZGF0YVR5cGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgcGFyc2UodXJsOiBzdHJpbmcgfCBVcmkpOiBVcmkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgdXJsID09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1cmw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgVXJpKHVybCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHRvU3RyaW5nKCkge1xyXG4gICAgICAgIGxldCBwYXJhbSA9IFVyaS5nZXREYXRhKHRoaXMuX2RhdGEpO1xyXG4gICAgICAgIGlmIChwYXJhbSA9PSAnJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcGF0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhdGggKyAnPycgKyBwYXJhbTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldERhdGEoYXJnczogYW55KTogc3RyaW5nIHtcclxuICAgICAgICBpZiAoJ29iamVjdCcgIT0gdHlwZW9mIGFyZ3MpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFyZ3M7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgdmFsdWU6IHN0cmluZyA9ICcnO1xyXG4gICAgICAgICQuZWFjaChhcmdzLCBmdW5jdGlvbihrZXksIGl0ZW0pIHtcclxuICAgICAgICAgICAgdmFsdWUgKz0gVXJpLl9maWx0ZXJWYWx1ZShpdGVtLCBrZXkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB2YWx1ZS5zdWJzdHJpbmcoMCwgdmFsdWUubGVuZ3RoIC0gMSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgX2ZpbHRlclZhbHVlKGRhdGEsIHByZTogc3RyaW5nIHwgbnVtYmVyKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBkYXRhICE9ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwcmUgKyBcIj1cIiArIGRhdGEgKyBcIiZcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHZhbHVlID0gJyc7XHJcbiAgICAgICAgbGV0IGlzQXJyYXk6IGJvb2xlYW4gPSBkYXRhIGluc3RhbmNlb2YgQXJyYXk7XHJcbiAgICAgICAgJC5lYWNoKGRhdGEsIGZ1bmN0aW9uKGtleSwgaXRlbSkge1xyXG4gICAgICAgICAgICB2YWx1ZSArPSBVcmkuX2ZpbHRlclZhbHVlKGl0ZW0sIHByZSArIChpc0FycmF5ID8gXCJbXVwiIDogXCJbXCIgKyBrZXkgKyBcIl1cIikpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9wYXJzZVVybCh1cmw6IHN0cmluZyk6IFtzdHJpbmcsIHtba2V5OiBzdHJpbmddOiBzdHJpbmd9XSB7XHJcbiAgICAgICAgbGV0IFtwYXRoLCBwYXJhbV0gPSB1cmwuc3BsaXQoJz8nLCAyKTtcclxuICAgICAgICBpZiAoIXBhcmFtKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbcGF0aCwge31dO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgcmV0ID0ge30sXHJcbiAgICAgICAgICBzZWcgPSBwYXJhbS5zcGxpdCgnJicpLFxyXG4gICAgICAgICAgbGVuID0gc2VnLmxlbmd0aCwgaSA9IDAsIHM7IC8vbGVuID0gMlxyXG4gICAgICAgIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKCFzZWdbaV0pIHsgXHJcbiAgICAgICAgICAgICAgY29udGludWU7IFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHMgPSBzZWdbaV0uc3BsaXQoJz0nKTtcclxuICAgICAgICAgICAgcmV0W3NbMF1dID0gc1sxXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFtwYXRoLCByZXRdO1xyXG4gICAgfVxyXG59IiwiLyoqXHJcbiAqIOWIhumhtVxyXG4gKi9cclxuY2xhc3MgUGFnZSBleHRlbmRzIEJveCB7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwdWJsaWMgZWxlbWVudDogSlF1ZXJ5LFxyXG4gICAgICAgIG9wdGlvbj86IFBhZ2VPcHRpb25cclxuICAgICkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gJC5leHRlbmQoe30sIG5ldyBQYWdlRGVmYXVsdE9wdGlvbigpLCBvcHRpb24pO1xyXG4gICAgICAgIHRoaXMub3B0aW9ucy51cmwgPSBVcmkucGFyc2UodGhpcy5vcHRpb25zLnVybCk7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zLmRlbGV0ZVVybCA9IFVyaS5wYXJzZSh0aGlzLm9wdGlvbnMuZGVsZXRlVXJsKTtcclxuICAgICAgICB0aGlzLm9wdGlvbnMudXBkYXRlVXJsID0gVXJpLnBhcnNlKHRoaXMub3B0aW9ucy51cGRhdGVVcmwpO1xyXG4gICAgICAgIHRoaXMuaW5pdCgpO1xyXG4gICAgICAgIHRoaXMuc2VhcmNoKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG9wdGlvbnM6IFBhZ2VPcHRpb247XHJcblxyXG4gICAgcHJpdmF0ZSBfc2VhcmNoRm9ybTogSlF1ZXJ5O1xyXG5cclxuICAgIHByaXZhdGUgX2NoZWNrQWxsOiBKUXVlcnk7XHJcblxyXG4gICAgcHJpdmF0ZSBfYm9keTogSlF1ZXJ5O1xyXG5cclxuICAgIHByaXZhdGUgX3BhZ2VyOiBQYWdlcjtcclxuXHJcbiAgICBwdWJsaWMgaW5pdCgpIHtcclxuICAgICAgICBsZXQgaW5zdGFuY2UgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuX2JvZHkgPSB0aGlzLmVsZW1lbnQuZmluZCh0aGlzLm9wdGlvbnMucGFnZUJvZHkpO1xyXG4gICAgICAgIHRoaXMuX3NlYXJjaEZvcm0gPSB0aGlzLmVsZW1lbnQuZmluZCh0aGlzLm9wdGlvbnMuc2VhcmNoRm9ybSk7XHJcbiAgICAgICAgdGhpcy5fcGFnZXIgPSAkKCc8dWwgY2xhc3M9XCJwYWdlclwiPjwvdWw+JykucGFnZXIoe1xyXG4gICAgICAgICAgICBwYWdpbmF0ZTogZnVuY3Rpb24ocGFnZTogbnVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5zZWFyY2goJ3BhZ2UnLCBwYWdlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuX2NoZWNrQWxsID0gdGhpcy5lbGVtZW50LmZpbmQoJy5jaGVja0FsbCcpO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmQodGhpcy5fcGFnZXIuZWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fYmluZEV2ZW50KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNoZWNrQWxsKCkge1xyXG4gICAgICAgIHRoaXMuX2JvZHkuZmluZChcIi5jaGVja2JveFwiKS5hZGRDbGFzcygnY2hlY2tlZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRDaGVja2VkUm93KCk6IEFycmF5PEpRdWVyeT4ge1xyXG4gICAgICAgIGxldCBkYXRhID0gW107XHJcbiAgICAgICAgbGV0IGluc3RhbmNlID0gdGhpcztcclxuICAgICAgICB0aGlzLl9ib2R5LmZpbmQoJy5jaGVja2JveC5jaGVja2VkJykuZWFjaChmdW5jdGlvbihpLCBlbCkge1xyXG4gICAgICAgICAgICBkYXRhLnB1c2goJChlbCkucGFyZW50cyhpbnN0YW5jZS5vcHRpb25zLnJvdykpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIFxyXG4gICAgcHVibGljIGdldENoZWNrZWQoKTogQXJyYXk8c3RyaW5nPiB7XHJcbiAgICAgICAgbGV0IGRhdGEgPSBbXTtcclxuICAgICAgICBsZXQgaW5zdGFuY2UgPSB0aGlzO1xyXG4gICAgICAgICQuZWFjaCh0aGlzLmdldENoZWNrZWRSb3coKSwgZnVuY3Rpb24oaSwgaXRlbSkge1xyXG4gICAgICAgICAgICBkYXRhLnB1c2goaXRlbS5hdHRyKGluc3RhbmNlLm9wdGlvbnMuaWRUYWcpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOaOkuW6j1xyXG4gICAgICogQHBhcmFtIG5hbWUgXHJcbiAgICAgKiBAcGFyYW0gb3JkZXIgXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzb3J0KG5hbWU6IHN0cmluZywgb3JkZXI6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuc2VhcmNoKHtcclxuICAgICAgICAgICAgc29ydDogbmFtZSxcclxuICAgICAgICAgICAgb3JkZXI6IG9yZGVyXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmkJzntKJcclxuICAgICAqIEBwYXJhbSBuYW1lIFxyXG4gICAgICogQHBhcmFtIHZhbCBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHNlYXJjaChuYW1lOiBhbnkgPSB7fSwgdmFsPzogYW55KSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBuYW1lICE9ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgIG5hbWUgPSB7W25hbWVdOiB2YWx9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIW5hbWUuaGFzT3duUHJvcGVydHkoJ3BhZ2UnKSkge1xyXG4gICAgICAgICAgICBuYW1lWydwYWdlJ10gPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9wdGlvbnMudXJsLnNldERhdGEobmFtZSk7XHJcbiAgICAgICAgdGhpcy5yZWZyZXNoKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDliKDpmaTpgInkuK1cclxuICAgICAqL1xyXG4gICAgcHVibGljIGRlbGV0ZUNoZWNrZWQoKSB7XHJcbiAgICAgICAgbGV0IGVsZW1lbnRzID0gdGhpcy5nZXRDaGVja2VkUm93KCk7XHJcbiAgICAgICAgbGV0IGluc3RhbmNlID0gdGhpcztcclxuICAgICAgICBsZXQgZGF0YSA9IFtdO1xyXG4gICAgICAgIGVsZW1lbnRzLmZvckVhY2goaXRlbT0+IHtcclxuICAgICAgICAgICAgZGF0YS5wdXNoKGl0ZW0uYXR0cihpbnN0YW5jZS5vcHRpb25zLmlkVGFnKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5kZWxldGVJZCguLi5kYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGVsZXRlUm93KGVsZW1lbnQ6IEpRdWVyeSkge1xyXG4gICAgICAgIGxldCBpZCA9IGVsZW1lbnQuYXR0cih0aGlzLm9wdGlvbnMuaWRUYWcpO1xyXG4gICAgICAgIGlmICghaWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRlbGV0ZUlkKGlkKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+WaWTmoIforrBcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfZ2V0SWRUYWcoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmlkVGFnLnJlcGxhY2UoJ2RhdGEtJywgJycpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkZWxldGVJZCguLi5kYXRhOiBzdHJpbmdbXSkge1xyXG4gICAgICAgIGlmIChkYXRhLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGluc3RhbmNlID0gdGhpcztcclxuICAgICAgICBpZiAoZmFsc2UgPT0gdGhpcy50cmlnZ2VyKCdkZWxldGUnLCAuLi5kYXRhKSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZGVsZXRlIGlzIHN0b3AhJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vcHRpb25zLmRlbGV0ZVVybC5zZXREYXRhKHRoaXMuX2dldElkVGFnKCksIGRhdGEpLnBvc3Qoe30sZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5jb2RlID09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgJ2pzb24nKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVmcmVzaCgpIHtcclxuICAgICAgICBsZXQgaW5zdGFuY2UgPSB0aGlzO1xyXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuYmVmb3JlUXVlcnkgXHJcbiAgICAgICAgJiYgdGhpcy5vcHRpb25zLmJlZm9yZVF1ZXJ5LmNhbGwodGhpcykgPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3F1ZXJ5IGlzIHN0b3AhJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vcHRpb25zLnVybC5nZXRKc29uKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgaWYgKGluc3RhbmNlLm9wdGlvbnMuYWZ0ZXJRdWVyeSkge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2Uub3B0aW9ucy5hZnRlclF1ZXJ5LmNhbGwodGhpcywgZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGRhdGEuY29kZSAhPSAyMDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGluc3RhbmNlLl9jcmVhdGVCb2R5KGRhdGEuZGF0YS5wYWdlbGlzdCk7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLl9wYWdlci5jaGFuZ2UoZGF0YS5kYXRhLnBhZ2UsIE1hdGguY2VpbChkYXRhLmRhdGEudG90YWwgLyBkYXRhLmRhdGEucGFnZVNpemUpKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWIpOaWreaYr+WQpuS4uuepuuWAvFxyXG4gICAgICogQHBhcmFtIHZhbCBcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfY2hlY2tFbXB0eSh2YWw/OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gIXZhbCB8fCB2YWwgPT0gJycgfHwgdmFsLnRyaW0oKSA9PSAnJztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlQ29sdW1uKGVsZW1lbnQ6IEpRdWVyeSkge1xyXG4gICAgICAgIGxldCBuYW1lID0gZWxlbWVudC5hdHRyKCdkYXRhLW5hbWUnKTtcclxuICAgICAgICBpZiAodGhpcy5fY2hlY2tFbXB0eShuYW1lKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBpZCA9IGVsZW1lbnQucGFyZW50cyh0aGlzLm9wdGlvbnMucm93KS5hdHRyKHRoaXMub3B0aW9ucy5pZFRhZyk7XHJcbiAgICAgICAgaWYgKHRoaXMuX2NoZWNrRW1wdHkoaWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5iZWZvcmVVcGRhdGUgXHJcbiAgICAgICAgJiYgZmFsc2UgPT0gdGhpcy5vcHRpb25zLmJlZm9yZVVwZGF0ZS5jYWxsKHRoaXMsIGVsZW1lbnQsIGlkKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBpbnN0YW5jZSA9IHRoaXM7XHJcbiAgICAgICAgbGV0IGlucHV0ID0gJCgnPGlucHV0IHR5cGU9XCJ0ZXh0XCI+Jyk7XHJcbiAgICAgICAgaW5wdXQudmFsKGVsZW1lbnQudGV4dCgpKTtcclxuICAgICAgICBpbnB1dC5ibHVyKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBsZXQgdmFsID0gaW5wdXQudmFsKCk7XHJcbiAgICAgICAgICAgIGlucHV0LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICBlbGVtZW50LnRleHQodmFsKTtcclxuICAgICAgICAgICAgaW5zdGFuY2UudXBkYXRlRGF0YShpZCwgbmFtZSwgdmFsKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBlbGVtZW50Lmh0bWwoJycpLmFwcGVuZChpbnB1dCk7XHJcbiAgICAgICAgaW5wdXQuZm9jdXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlRGF0YShpZDogc3RyaW5nLCBuYW1lOiBzdHJpbmcsIHZhbDogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKGZhbHNlID09IHRoaXMudHJpZ2dlcigndXBkYXRlJywgaWQsIG5hbWUsIHZhbCkpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3VwZGF0ZSBpcyBzdG9wIScpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub3B0aW9ucy51cGRhdGVVcmwucG9zdCh7XHJcbiAgICAgICAgICAgIFt0aGlzLl9nZXRJZFRhZygpXTogaWQsXHJcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgICAgIHZhbHVlOiB2YWxcclxuICAgICAgICB9LCBmdW5jdGlvbihkYXRhKSB7XHJcblxyXG4gICAgICAgIH0sICdqc29uJyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfYmluZEV2ZW50KCkge1xyXG4gICAgICAgIGxldCBpbnN0YW5jZSA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5fc2VhcmNoRm9ybS5zdWJtaXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCQodGhpcykuc2VyaWFsaXplQXJyYXkoKSk7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLnNlYXJjaCgkKHRoaXMpLnNlcmlhbGl6ZUFycmF5KCkpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LmZpbmQodGhpcy5vcHRpb25zLnNvcnRSb3crICc+KicpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBsZXQgJHRoaXMgPSAkKHRoaXMpO1xyXG4gICAgICAgICAgICBsZXQgbmFtZSA9ICR0aGlzLmF0dHIoJ2RhdGEtbmFtZScpO1xyXG4gICAgICAgICAgICBpZiAoaW5zdGFuY2UuX2NoZWNrRW1wdHkobmFtZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoJHRoaXMuaGFzQ2xhc3MoJ3NvcnQtYXNjJykpIHtcclxuICAgICAgICAgICAgICAgICR0aGlzLnJlbW92ZUNsYXNzKCkuYWRkQ2xhc3MoJ3NvcnQtZGVzYycpO1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2Uuc29ydChuYW1lLCAnZGVzYycpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJHRoaXMucmVtb3ZlQ2xhc3MoKS5hZGRDbGFzcygnc29ydC1hc2MnKTtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlLnNvcnQobmFtZSwgJ2FzYycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tBbGwuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGxldCAkdGhpcyA9ICQodGhpcyk7XHJcbiAgICAgICAgICAgIGlmICgkdGhpcy5oYXNDbGFzcygnY2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAkdGhpcy5yZW1vdmVDbGFzcygnY2hlY2tlZCcpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGluc3RhbmNlLl9jaGVja0FsbC5hZGRDbGFzcygnY2hlY2tlZCcpO1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5fYm9keS5maW5kKCcuY2hlY2tib3gnKS5hZGRDbGFzcygnY2hlY2tlZCcpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5maW5kKCcuZGVsZXRlQWxsJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGxldCAkdGhpcyA9ICQodGhpcyk7XHJcbiAgICAgICAgICAgIGxldCB0aXAgPSAkdGhpcy5hdHRyKCdkYXRhLXRpcCcpIHx8IGluc3RhbmNlLm9wdGlvbnMuZGVsZXRlVGlwO1xyXG4gICAgICAgICAgICBpZiAoY29uZmlybSh0aXApKSB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5kZWxldGVDaGVja2VkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQuZmluZCh0aGlzLm9wdGlvbnMuZmlsdGVyUm93ICsgJyBpbnB1dCcpLmJsdXIoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLl9zZWFyY2hFbGVtZW50KCQodGhpcykpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5maW5kKHRoaXMub3B0aW9ucy5maWx0ZXJSb3cgKyAnIHNlbGVjdCcpLmNoYW5nZShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UuX3NlYXJjaEVsZW1lbnQoJCh0aGlzKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fYm9keS5vbihcImNsaWNrXCIsICcuZGVsZXRlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGxldCAkdGhpcyA9ICQodGhpcyk7XHJcbiAgICAgICAgICAgIGxldCB0aXAgPSAkdGhpcy5hdHRyKCdkYXRhLXRpcCcpIHx8IGluc3RhbmNlLm9wdGlvbnMuZGVsZXRlVGlwO1xyXG4gICAgICAgICAgICBpZiAoY29uZmlybSh0aXApKSB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5kZWxldGVSb3coJHRoaXMucGFyZW50cyhpbnN0YW5jZS5vcHRpb25zLnJvdykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fYm9keS5vbihcImNsaWNrXCIsICcuY2hlY2tib3gnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgbGV0ICR0aGlzID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgaWYgKCR0aGlzLmhhc0NsYXNzKCdjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICAgICR0aGlzLnJlbW92ZUNsYXNzKCdjaGVja2VkJyk7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5fY2hlY2tBbGwucmVtb3ZlQ2xhc3MoJ2NoZWNrZWQnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkdGhpcy5hZGRDbGFzcygnY2hlY2tlZCcpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuX2JvZHkub24oJ2NsaWNrJywgdGhpcy5vcHRpb25zLmNvbHVtbiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLnVwZGF0ZUNvbHVtbigkKHRoaXMpKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9zZWFyY2hFbGVtZW50KGVsZW1lbnQ6IEpRdWVyeSkge1xyXG4gICAgICAgIGxldCBuYW1lID0gZWxlbWVudC5hdHRyKCduYW1lJyk7XHJcbiAgICAgICAgaWYgKCFuYW1lKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZWFyY2gobmFtZSwgZWxlbWVudC52YWwoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfY3JlYXRlQm9keShkYXRhOiBhbnkpIHtcclxuICAgICAgICBsZXQgaHRtbCA9ICcnO1xyXG4gICAgICAgIGlmICh0eXBlb2YgZGF0YSA9PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICBsZXQgaW5zdGFuY2UgPSB0aGlzO1xyXG4gICAgICAgICAgICAkLmVhY2goZGF0YSwgZnVuY3Rpb24oaSwgaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgaHRtbCArPSBpbnN0YW5jZS5vcHRpb25zLmNyZWF0ZVJvdyhpdGVtKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaHRtbCA9IGRhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2JvZHkuaHRtbChodG1sKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGVsZXRlKGNhbGxiYWNrOiAoaWQ6IHN0cmluZywgcm93OiBKUXVlcnkpID0+IGFueSk6IHRoaXMge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9uKCdkZWxldGUnLCBjYWxsYmFjayk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZShjYWxsYmFjazogKGlkOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgdmFsOiBzdHJpbmcpID0+IGFueSk6IHRoaXMge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9uKCd1cGRhdGUnLCBjYWxsYmFjayk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmludGVyZmFjZSBQYWdlT3B0aW9uIHtcclxuICAgIHVybD86IHN0cmluZyB8IFVyaSwgIC8vIOafpeivoumTvuaOpVxyXG4gICAgZGVsZXRlVXJsPzogc3RyaW5nIHwgVXJpLCAvL+WIoOmZpOmTvuaOpe+8jCBwb3N0IOaPkOS6pFxyXG4gICAgdXBkYXRlVXJsPzogc3RyaW5nIHwgVXJpLCAgLy8g5pu05paw5p2l6ZO+5o6l77yMcG9zdCDmj5DkuqRcclxuICAgIHNlYXJjaEZvcm0/OiBzdHJpbmcsICAgLy/mkJzntKLooajljZVcclxuICAgIHBhZ2VCb2R5Pzogc3RyaW5nLCAgICAgLy8g5YiX6KGo5Li75L2TXHJcbiAgICBmaWx0ZXJSb3c/OiBzdHJpbmcsICAgIC8v562b6YCJ6KGMXHJcbiAgICBzb3J0Um93Pzogc3RyaW5nLCAgICAgIC8v5o6S5bqP6KGMXHJcbiAgICByb3c/OiBzdHJpbmcsICAgICAgICAgIC8v5YiX6KGo6KGM5qCH562+XHJcbiAgICBjb2x1bW4/OiBzdHJpbmcsICAgICAgLy/ljZXlhYPmoLzmoIfnrb5cclxuICAgIGlkVGFnPzogc3RyaW5nLCAgICAgICAgLy8g6KGM5LiK55qEaWQg5qCH6K6wXHJcbiAgICBjcmVhdGVSb3c/OiAoZGF0YTogYW55KSA9PiBzdHJpbmcsICAgLy/kuIDooYznlJ/miJBcclxuICAgIGRlbGV0ZVRpcD86IHN0cmluZywgICAgIC8v5Yig6Zmk5o+Q56S6XHJcbiAgICBvbmRlbGV0ZT86IChpZDogc3RyaW5nLCByb3c6IEpRdWVyeSkgPT4gYW55LCAgLy/liKDpmaTkuovku7ZcclxuICAgIG9udXBkYXRlPzogKGlkOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgdmFsOiBzdHJpbmcpID0+IGFueSwgLy/mm7TmlrDkuovku7ZcclxuICAgIGJlZm9yZVVwZGF0ZT86IChlbGVtZW50OiBKUXVlcnksIGlkOiBzdHJpbmcpID0+IGFueSwgXHJcbiAgICBiZWZvcmVRdWVyeT86ICgpPT5hbnksICAgLy/mn6Xor6LlvIDlp4vkuovku7ZcclxuICAgIGFmdGVyUXVlcnk/OiAoZGF0YSkgPT4gYW55LCAvL+afpeivoue7k+adn1xyXG59XHJcblxyXG5jbGFzcyBQYWdlRGVmYXVsdE9wdGlvbiBpbXBsZW1lbnRzIFBhZ2VPcHRpb24ge1xyXG4gICAgdXJsOiBzdHJpbmcgPSAncXVlcnknO1xyXG4gICAgdXBkYXRlVXJsOiBzdHJpbmcgPSAndXBkYXRlJztcclxuICAgIGRlbGV0ZVVybDogc3RyaW5nID0gJ2RlbGV0ZSc7XHJcbiAgICBpZFRhZzogc3RyaW5nID0gJ2RhdGEtaWQnO1xyXG4gICAgc2VhcmNoRm9ybT86IHN0cmluZyA9ICcucGFnZS1zZWFyY2gnO1xyXG4gICAgZGVsZXRlVGlwOiBzdHJpbmcgPSAn56Gu5a6a5Yig6Zmk77yfJztcclxuICAgIHBhZ2VCb2R5OiBzdHJpbmcgPSAnLnBhZ2UtYm9keSc7XHJcbiAgICBmaWx0ZXJSb3c6IHN0cmluZyA9ICcuZmlsdGVyLXJvdyc7XHJcbiAgICBzb3J0Um93OiBzdHJpbmcgPSAnLnNvcnQtcm93JztcclxuICAgIHJvdzogc3RyaW5nID0gJ3RyJztcclxuICAgIGNvbHVtbjogc3RyaW5nID0gJ3RkJztcclxufVxyXG5cclxuXHJcbjsoZnVuY3Rpb24oJDogYW55KSB7XHJcbiAgJC5mbi5wYWdlID0gZnVuY3Rpb24ob3B0aW9uID86IFBhZ2VPcHRpb24pIHtcclxuICAgIHJldHVybiBuZXcgUGFnZSh0aGlzLCBvcHRpb24pOyBcclxuICB9O1xyXG59KShqUXVlcnkpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
